!function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a="function"==typeof require&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}for(var i="function"==typeof require&&require,o=0;o<r.length;o++)s(r[o]);return s}({1:[function(require,module,exports){var bed={image:"assets/bed.gif",x:295,y:239,cutoff:440},objs=[bed],wall1={offset:{x:0,y:0},points:[{x:315,y:0},{x:0,y:0},{x:0,y:414},{x:315,y:257}]},wall2={offset:{x:0,y:0},points:[{x:315,y:0},{x:315,y:257},{x:630,y:414},{x:630,y:0}]},wall3={offset:{x:0,y:0},points:[{x:0,y:414},{x:12,y:510},{x:104,y:464}]},wall4={offset:{x:0,y:0},points:[{x:210,y:517},{x:116,y:564},{x:320,y:570}]},wall5={offset:{x:0,y:0},points:[{x:310,y:570},{x:630,y:570},{x:630,y:414}]},exit={opts:{blockType:"exit",exit:{nextroom:"TV Set",startpos:{x:448,y:198}}},offset:{x:0,y:0},points:[{x:12,y:512},{x:0,y:570},{x:116,y:564}]},bedblock={offset:{x:0,y:0},points:[{x:477,y:346},{x:295,y:436},{x:430,y:502},{x:612,y:412}]},blocks=[wall1,wall2,wall3,wall4,wall5,bedblock,exit],map={name:"Bedroom",image:"assets/room1.gif",w:630,h:570,objs:objs,blocks:blocks};module.exports=exports=map},{}],2:[function(require,module,exports){var block1={offset:{x:0,y:0},points:[{x:315,y:0},{x:315,y:248},{x:0,y:406},{x:0,y:156}]},block2={offset:{x:0,y:0},points:[{x:239,y:287},{x:238,y:270},{x:185,y:321},{x:195,y:325},{x:218,y:315}]},block3={offset:{x:0,y:0},points:[{x:325,y:328},{x:303,y:348},{x:303,y:357},{x:400,y:309},{x:400,y:291}]},block4={offset:{x:0,y:0},points:[{x:315,y:0},{x:315,y:249},{x:435,y:309},{x:435,y:60}]},block5={offset:{x:0,y:0},points:[{x:315,y:0},{x:401,y:292},{x:401,y:309},{x:435,y:325}]},block6={offset:{x:0,y:0},points:[{x:504,y:94},{x:434,y:60},{x:434,y:326},{x:504,y:290}]},block8={offset:{x:0,y:0},points:[{x:630,y:323},{x:223,y:524},{x:314,y:570},{x:630,y:413}]},block9={offset:{x:0,y:0},points:[{x:502,y:350},{x:630,y:414},{x:572,y:314}]},block10={offset:{x:0,y:0},points:[{x:0,y:412},{x:0,y:570},{x:316,y:570}]},block11={offset:{x:0,y:0},points:[{x:331,y:295},{x:331,y:319},{x:355,y:319},{x:355,y:295}]},block12={offset:{x:0,y:0},points:[{x:81,y:396},{x:60,y:404},{x:60,y:414},{x:81,y:424},{x:103,y:413},{x:103,y:402}]},block13={offset:{x:0,y:0},points:[{x:0,y:414},{x:194,y:316},{x:194,y:300},{x:0,y:398}]},exit={offset:{x:0,y:0},opts:{blockType:"exit",exit:{nextroom:"Bedroom",startpos:{x:88,y:384}}},points:[{x:504,y:292},{x:573,y:316},{x:569,y:273}]},blocks=[block1,block2,block3,block4,block5,block6,block8,block9,block10,block11,block12,block13,exit],objs=[{image:"assets/room-2-wall.gif",x:442,y:66,cutoff:350},{image:"assets/mic.gif",x:331,y:214,cutoff:301},{image:"assets/camera.gif",x:58,y:312,cutoff:414},{image:"assets/bleachers.gif",x:224,y:308,cutoff:570}],map={name:"TV Set",image:"assets/room2.gif",w:630,h:570,objs:objs,blocks:blocks};module.exports=exports=map},{}],3:[function(require,module,exports){var makeVector=require("../support/functions.js").makeVector,_=require("lodash"),SAT=require("../support/SAT.min.js"),Polygon=SAT.Polygon,defaults={type:"block"},Block=function(offset,points,opts){var origin=(_.defaults(opts,defaults),makeVector(offset)),vectors=_.map(points,makeVector,this);this.opts=opts||{},this.offset=offset,this.points=points,this.box=new Polygon(origin,vectors),this.blockType=this.opts.blockType||"block","exit"===this.blockType&&(this.exit=_.clone(this.opts.exit,!0))};Block.make=function(hash){return new Block(hash.offset,hash.points,hash.opts)},Block.prototype.toHash=function(){return{offset:this.offset,points:this.points,opts:this.opts}},Block.makeGroup=function(arr){return _.map(arr,Block.make)},module.exports=exports=Block},{"../support/SAT.min.js":8,"../support/functions.js":9,lodash:12}],4:[function(require,module,exports){function increaseByOne(dir,desired){switch(dir){case"left":desired.x=desired.x-1;break;case"left back":desired.x=desired.x-2,desired.y=desired.y-1;break;case"left front":desired.x=desired.x-2,desired.y=desired.y+1;break;case"right":desired.x=desired.x+1;break;case"right back":desired.x=desired.x+2,desired.y=desired.y-1;break;case"right front":desired.x=desired.x+2,desired.y=desired.y+1;break;case"front":desired.y=desired.y+1;break;case"back":desired.y=desired.y-1}return desired}function newTest(box){return function(block){return testPolygonPolygon(box,block.box)}}var exports,Sprite=require("./sprite"),Box=require("../support/SAT.min.js").Box,testPolygonPolygon=require("../support/SAT.min.js").testPolygonPolygon,makeVector=require("../support/functions.js").makeVector,_=require("lodash"),Character=(Math.abs,function(options){this.initialize(options)});Character.prototype.initialize=function(options,queuer){this.x=options.x||0,this.y=options.y||0,this.h=options.h,this.w=options.w,this.sprite=new Sprite(options.sprite,this.w,this.h,queuer),this.state="standing",this.direction="front",this.ticker=0},Character.prototype.render=function(ctx){var state=this.getSpriteState();ctx.drawImage(this.sprite.img,state.sx,state.sy,this.sprite.dw,this.sprite.dh,this.x,this.y,this.sprite.dw,this.sprite.dh)},Character.prototype.tick=function(blocks){return"walking"===this.state&&this.move(blocks),3===this.ticker?this.ticker=0:this.ticker++},Character.prototype.go=function(dir,desired,blocks,diff){function isExit(block){return"exit"===block.blockType}var collisions,exit,i=0,cur={x:this.x,y:this.y};for(i;diff>=i;i++){if(collisions=this.getCollisionsAtCoordinates(cur.x,cur.y,blocks)){if(exits=_.filter(collisions,isExit),exits[0])return exit=exits[0],void this.exit(exit.exit);return}this.x=cur.x,this.y=cur.y,cur=increaseByOne(dir,cur)}},Character.prototype.getCollisionsAtCoordinates=function(x,y,blocks){var box=new Box(makeVector({x:x+4,y:y+(this.h-2)}),this.w-8,4).toPolygon(),test=newTest(box),collisions=_.filter(blocks,test);return 0===collisions.length?!1:collisions},Character.prototype.exit=function(exit){this.game.loadMap(exit.nextroom,exit.startpos)},Character.prototype.move=function(blocks){var diff=this.ticker%2===0?24:16;switch(this.direction){case"left":this.go("left",{x:this.x-diff,y:this.y},blocks,diff);break;case"left back":diff/=2,this.go("left back",{x:this.x-diff,y:this.y-.5*diff},blocks,diff);break;case"left front":diff/=2,this.go("left front",{x:this.x-diff,y:this.y+.5*diff},blocks,diff);break;case"front":this.go("front",{x:this.x,y:this.y+diff},blocks,diff);break;case"right":this.go("right",{x:this.x+diff,y:this.y},blocks,diff);break;case"right front":diff/=2,this.go("right front",{x:this.x+diff,y:this.y+.5*diff},blocks,diff);break;case"back":this.go("back",{x:this.x,y:this.y-diff},blocks,diff);break;case"right back":diff/=2,this.go("right back",{x:this.x+diff,y:this.y-.5*diff},blocks,diff)}},Character.prototype.getSpriteState=function(){return"standing"===this.state?this.sprite.standing[this.direction.split(" ")[0]]:this.sprite.walking[this.direction.split(" ")[0]][this.ticker]},Character.prototype.maxy=function(){return this.y+this.h},module.exports=exports=Character},{"../support/SAT.min.js":8,"../support/functions.js":9,"./sprite":7,lodash:12}],5:[function(require,module,exports){var keypress=require("../support/keypress"),Character=require("./character"),_=require("lodash"),Map=require("./map");Game=function(element,character,mode){this.initialize(element,character,mode)},Game.prototype.initialize=function(canvas,character,mode){this.mode=mode,this.imgs=[],this.canvas=canvas,this.targetFps=10,this.loading=0,this.ctx=this.canvas.getContext("2d"),this.ctx.imageSmoothingEnabled=!1,this.character=new Character(character,this.queueImage.bind(this)),this.character.game=this,this.bindKeys(),this.addListeners()},Game.prototype.queueImage=function(img){this.imgs.push(img)},Game.prototype.imagesLoaded=function(){return _.every(this.imgs,"complete")},Game.prototype.addListeners=function(){window.addEventListener("resize",function(){this.reposition()}.bind(this),!0),window.addEventListener("onblur",function(){this.stop()}.bind(this),!0),window.addEventListener("onfocus",function(){this.launch()}.bind(this),!0)},Game.prototype.registerMap=function(map){var curmap=new Map(map,this.queueImage.bind(this));this.maps=this.maps||{},this.maps[curmap.name]=curmap},Game.prototype.loadMap=function(name,startpos){this.clearCanvas(),this.map=this.maps[name],this.canvas.setAttribute("width",this.map.width),this.canvas.setAttribute("height",this.map.height),this.character.x=startpos.x,this.character.y=startpos.y,this.reposition()},Game.prototype.reposition=function(){var cwidth=window.innerWidth,cheight=window.innerHeight,offset={x:0,y:0};offset.x=this.map.width<=cwidth?(cwidth-this.map.width)/2:-1*(this.character.x-cwidth/2),offset.y=this.map.height<=cheight?(cheight-this.map.height)/2:-1*(this.character.y-cheight/2),this.canvas.style.left=offset.x+"px",this.canvas.style.top=offset.y+"px"},Game.prototype.clearCanvas=function(){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height)},Game.prototype.draw=function(){this.clearCanvas(),this.character.tick(this.map.blocks),this.map.render(this.ctx,this.mode,this.character),(this.map.width>window.outerWidth||this.map.height>window.outerHeight)&&this.reposition()},Game.prototype.launch=function(){this.imagesLoaded()?this.start():window.setTimeout(function(){this.launch()}.bind(this),125)},Game.prototype.start=function(){var that=this;that.draw(),that.running=!0,that.timer=window.setTimeout(function(){window.requestAnimationFrame(that.start.bind(that))},1e3/that.targetFps)},Game.prototype.stop=function(){window.clearTimeout(this.timer),this.running=!1},Game.prototype.bindKeys=function(){var character=this.character,listener=new keypress.Listener;listener.register_many([{keys:"left",on_keydown:function(){character.direction="left",character.state="walking"},on_keyup:function(){character.state="standing"},is_solitary:!0},{keys:"up",on_keydown:function(){character.direction="back",character.state="walking"},on_keyup:function(){character.state="standing"},is_solitary:!0},{keys:["down"],on_keydown:function(){character.direction="front",character.state="walking"},on_keyup:function(){character.state="standing"},is_solitary:!0},{keys:["right"],on_keydown:function(){character.direction="right",character.state="walking"},on_keyup:function(){character.state="standing"}},{keys:"left up",on_keydown:function(){character.direction="left back",character.state="walking"},on_keyup:function(){character.state="standing"},is_unordered:!0},{keys:"left down",on_keydown:function(){character.direction="left front",character.state="walking"},on_keyup:function(){character.state="standing"},is_unordered:!0},{keys:"right up",on_keydown:function(){character.direction="right back",character.state="walking"},on_keyup:function(){character.state="standing"},is_unordered:!0},{keys:"right down",on_keydown:function(){character.direction="right front",character.state="walking"},on_keyup:function(){character.state="standing"},is_unordered:!0}])},module.exports=exports=Game},{"../support/keypress":10,"./character":4,"./map":6,lodash:12}],6:[function(require,module,exports){var _=require("lodash"),createImage=require("../support/functions.js").createImage,Block=(require("../support/SAT.min"),require("./block.js")),Map=function(options,queuer){this.initialize(options,queuer)};Map.prototype.initialize=function(options,queuer){this.name=options.name,this.width=options.w,this.height=options.h,this.queuer=queuer,this.image=this.setImage(options.image),this.objs=options.objs?this.loadObjects(options.objs):[],this.blocks=options.blocks?Block.makeGroup(options.blocks):[]},Map.prototype.setImage=function(urlorimage){var mode=typeof urlorimage;return"string"===mode?createImage(urlorimage):(this.queuer(urlorimage),urlorimage)},Map.prototype.addBlock=function(block){this.blocks.push(Block.make(block))},Map.prototype.addObj=function(obj){obj.imagePath=obj.image,obj.image=createImage(el.image,this.queuer),this.objs.splice(_.sortedIndex(this.objs,obj,"cutoff"),0,obj)},Map.prototype.toJSON=function(){return JSON.stringify({name:this.name,width:this.width,objs:_.map(this.objs,function(obj){return{cutoff:obj.cutoff,image:obj.imagePath}}),blocks:_.map(this.blocks,function(block){return block.toHash()})})},Map.prototype.loadObjects=function(objs){var Objs=_.map(objs,function(el){return el.imagePath=el.image,el.image=createImage(el.image,this.queuer),el},this);return _.sortBy(Objs,"cutoff")},Map.prototype.render=function(ctx,mode,character){var toggle=0;ctx.drawImage(this.image,0,0),character?(_.each(this.objs,function(obj){0===toggle&&character.maxy()<=obj.cutoff?(toggle=1,character.render(ctx),ctx.drawImage(obj.image,obj.x,obj.y)):ctx.drawImage(obj.image,obj.x,obj.y)}),0===toggle&&character.render(ctx)):_.each(this.objs,function(obj){ctx.drawImage(obj.image,obj.x,obj.y)}),mode&&(ctx.fillStyle="rgba(255, 0, 0, 0.25);",_.each(this.blocks,function(block){ctx.beginPath(),ctx.moveTo(block.box.points[0].x,block.box.points[0].y);for(var i=1;i<block.box.points.length;i++)ctx.lineTo(block.box.points[i].x,block.box.points[i].y);ctx.lineTo(block.box.points[0].x,block.box.points[0].y),ctx.closePath(),ctx.fill()},this))},module.exports=exports=Map},{"../support/SAT.min":8,"../support/functions.js":9,"./block.js":3,lodash:12}],7:[function(require,module,exports){var exports,createImage=require("../support/functions.js").createImage,Sprite=function(address,w,h,queuer){return{dw:w,dh:h,img:createImage(address,queuer),standing:{front:{sx:3*w,sy:0},back:{sx:2*w,sy:0},right:{sx:1*w,sy:0},left:{sx:0*w,sy:0}},walking:{front:[{sx:3*w,sy:1*h},{sx:3*w,sy:2*h},{sx:3*w,sy:3*h},{sx:3*w,sy:4*h}],back:[{sx:2*w,sy:1*h},{sx:2*w,sy:2*h},{sx:2*w,sy:3*h},{sx:2*w,sy:4*h}],right:[{sx:1*w,sy:1*h},{sx:1*w,sy:2*h},{sx:1*w,sy:3*h},{sx:1*w,sy:4*h}],left:[{sx:0*w,sy:1*h},{sx:0*w,sy:2*h},{sx:0*w,sy:3*h},{sx:0*w,sy:4*h}]}}};module.exports=exports=Sprite},{"../support/functions.js":9}],8:[function(require,module,exports){function w(){function a(b,k){this.x=b||0,this.y=k||0}function e(b,k){this.pos=b||new a,this.points=k||[],this.angle=0,this.offset=new a,this.recalc()}function u(b,k,c){this.pos=b||new a,this.w=k||0,this.h=c||0}function v(){this.b=this.a=null,this.overlapN=new a,this.overlapV=new a,this.clear()}function z(b,k,c){for(var a=Number.MAX_VALUE,f=-Number.MAX_VALUE,h=b.length,l=0;h>l;l++){var g=b[l].d(k);a>g&&(a=g),g>f&&(f=g)}c[0]=a,c[1]=f}function A(b,k,c,a,f,h){var l=q.pop(),g=q.pop();return b=d.pop().c(k).sub(b),k=b.d(f),z(c,f,l),z(a,f,g),g[0]+=k,g[1]+=k,l[0]>g[1]||g[0]>l[1]?(d.push(b),q.push(l),q.push(g),!0):(h&&(c=0,l[0]<g[0]?(h.aInB=!1,l[1]<g[1]?(c=l[1]-g[0],h.bInA=!1):(c=l[1]-g[0],a=g[1]-l[0],c=a>c?c:-a)):(h.bInA=!1,l[1]>g[1]?(c=l[0]-g[1],h.aInB=!1):(c=l[1]-g[0],a=g[1]-l[0],c=a>c?c:-a)),a=Math.abs(c),a<h.overlap&&(h.overlap=a,h.overlapN.c(f),0>c&&h.overlapN.reverse())),d.push(b),q.push(l),q.push(g),!1)}function x(b,k){var c=b.e(),a=k.d(b);return 0>a?-1:a>c?1:0}function B(b,k,c){for(var a=d.pop().c(k.pos).sub(b.pos),f=k.r,h=f*f,l=b.calcPoints,g=l.length,s=d.pop(),p=d.pop(),m=0;g>m;m++){var e=m===g-1?0:m+1,q=0===m?g-1:m-1,t=0,r=null;s.c(b.edges[m]),p.c(a).sub(l[m]),c&&p.e()>h&&(c.aInB=!1);var n=x(s,p);if(-1===n){if(s.c(b.edges[q]),e=d.pop().c(a).sub(l[q]),n=x(s,e),1===n){if(n=p.f(),n>f)return d.push(a),d.push(s),d.push(p),d.push(e),!1;c&&(c.bInA=!1,r=p.normalize(),t=f-n)}d.push(e)}else if(1===n){if(s.c(b.edges[e]),p.c(a).sub(l[e]),n=x(s,p),-1===n){if(n=p.f(),n>f)return d.push(a),d.push(s),d.push(p),!1;c&&(c.bInA=!1,r=p.normalize(),t=f-n)}}else{if(e=s.g().normalize(),n=p.d(e),q=Math.abs(n),n>0&&q>f)return d.push(a),d.push(e),d.push(p),!1;c&&(r=e,t=f-n,n>=0||2*f>t)&&(c.bInA=!1)}r&&c&&Math.abs(t)<Math.abs(c.overlap)&&(c.overlap=t,c.overlapN.c(r))}return c&&(c.a=b,c.b=k,c.overlapV.c(c.overlapN).scale(c.overlap)),d.push(a),d.push(s),d.push(p),!0}function C(b,a,c){for(var d=b.calcPoints,f=d.length,h=a.calcPoints,l=h.length,g=0;f>g;g++)if(A(b.pos,a.pos,d,h,b.normals[g],c))return!1;for(g=0;l>g;g++)if(A(b.pos,a.pos,d,h,a.normals[g],c))return!1;return c&&(c.a=b,c.b=a,c.overlapV.c(c.overlapN).scale(c.overlap)),!0}var m={};m.Vector=a,m.V=a,a.prototype.copy=a.prototype.c=function(b){return this.x=b.x,this.y=b.y,this},a.prototype.clone=a.prototype.i=function(){return new a(this.x,this.y)},a.prototype.perp=a.prototype.g=function(){var b=this.x;return this.x=this.y,this.y=-b,this},a.prototype.rotate=a.prototype.rotate=function(b){var a=this.x,c=this.y;return this.x=a*Math.cos(b)-c*Math.sin(b),this.y=a*Math.sin(b)+c*Math.cos(b),this},a.prototype.reverse=a.prototype.reverse=function(){return this.x=-this.x,this.y=-this.y,this},a.prototype.normalize=a.prototype.normalize=function(){var b=this.f();return b>0&&(this.x/=b,this.y/=b),this},a.prototype.add=a.prototype.add=function(b){return this.x+=b.x,this.y+=b.y,this},a.prototype.sub=a.prototype.sub=function(b){return this.x-=b.x,this.y-=b.y,this},a.prototype.scale=a.prototype.scale=function(b,a){return this.x*=b,this.y*=a||b,this},a.prototype.project=a.prototype.j=function(b){var a=this.d(b)/b.e();return this.x=a*b.x,this.y=a*b.y,this},a.prototype.projectN=a.prototype.k=function(b){var a=this.d(b);return this.x=a*b.x,this.y=a*b.y,this},a.prototype.reflect=function(b){var a=this.x,c=this.y;return this.j(b).scale(2),this.x-=a,this.y-=c,this},a.prototype.reflectN=function(b){var a=this.x,c=this.y;return this.k(b).scale(2),this.x-=a,this.y-=c,this},a.prototype.dot=a.prototype.d=function(b){return this.x*b.x+this.y*b.y},a.prototype.len2=a.prototype.e=function(){return this.d(this)},a.prototype.len=a.prototype.f=function(){return Math.sqrt(this.e())},m.Circle=function(b,k){this.pos=b||new a,this.r=k||0},m.Polygon=e,e.prototype.setPoints=function(b){return this.points=b,this.recalc(),this},e.prototype.setAngle=function(b){return this.angle=b,this.recalc(),this},e.prototype.setOffset=function(b){return this.offset=b,this.recalc(),this},e.prototype.rotate=e.prototype.rotate=function(b){for(var a=this.points,c=a.length,d=0;c>d;d++)a[d].rotate(b);return this.recalc(),this},e.prototype.translate=e.prototype.translate=function(b,a){for(var c=this.points,d=c.length,f=0;d>f;f++)c[f].x+=b,c[f].y+=a;return this.recalc(),this},e.prototype.recalc=e.prototype.recalc=function(){var b,k=this.calcPoints=[],c=this.edges=[],d=this.normals=[],f=this.points,h=this.offset,l=this.angle,g=f.length;for(b=0;g>b;b++){var e=f[b].i();k.push(e),e.x+=h.x,e.y+=h.y,0!==l&&e.rotate(l)}for(b=0;g>b;b++)f=(new a).c(g-1>b?k[b+1]:k[0]).sub(k[b]),h=(new a).c(f).g().normalize(),c.push(f),d.push(h);return this},m.Box=u,u.prototype.toPolygon=u.prototype.l=function(){var b=this.pos,k=this.w,c=this.h;return new e(new a(b.x,b.y),[new a,new a(k,0),new a(k,c),new a(0,c)])},m.Response=v,v.prototype.clear=v.prototype.clear=function(){return this.bInA=this.aInB=!0,this.overlap=Number.MAX_VALUE,this};for(var d=[],r=0;10>r;r++)d.push(new a);for(var q=[],r=0;5>r;r++)q.push([]);var y=new v,D=new u(new a,1,1).l();return m.pointInCircle=function(b,a){var c=d.pop().c(b).sub(a.pos),e=a.r*a.r,f=c.e();return d.push(c),e>=f},m.pointInPolygon=function(b,a){D.pos.c(b),y.clear();var c=C(D,a,y);return c&&(c=y.aInB),c},m.testCircleCircle=function(b,a,c){var e=d.pop().c(a.pos).sub(b.pos),f=b.r+a.r,h=e.e();return h>f*f?(d.push(e),!1):(c&&(h=Math.sqrt(h),c.a=b,c.b=a,c.overlap=f-h,c.overlapN.c(e.normalize()),c.overlapV.c(e).scale(c.overlap),c.aInB=b.r<=a.r&&h<=a.r-b.r,c.bInA=a.r<=b.r&&h<=b.r-a.r),d.push(e),!0)},m.testPolygonCircle=B,m.testCirclePolygon=function(a,d,c){if((a=B(d,a,c))&&c){d=c.a;var e=c.aInB;c.overlapN.reverse(),c.overlapV.reverse(),c.a=c.b,c.b=d,c.aInB=c.bInA,c.bInA=e}return a},m.testPolygonPolygon=C,m}"function"==typeof define&&define.amd?define(w):"object"==typeof exports?module.exports=w():this.SAT=w()},{}],9:[function(require,module,exports){var SAT=require("./SAT.min.js"),Vector=SAT.Vector,_=require("lodash");exports.makeVector=function(point){return new Vector(point.x,point.y)},exports.createImage=function(url,queuer){var img=new Image;return queuer&&queuer(img),img.src=url,img},exports.addClass=function(classname,el){var regex=new RegExp("\\s?"+classname+"\\s?"),classlist=el.getAttribute("class")||"";regex.test(classlist)||(""===classlist?el.setAttribute("class",classname):el.setAttribute("class",classlist+" "+classname))},exports.querySelector=function(document){return _.bind(document.querySelector,document)},exports.removeClass=function(classname,el){var regex=new RegExp("\\s?("+classname+")\\s?"),classlist=el.getAttribute("class")||"",match=classlist.match(regex);match&&el.setAttribute("class",classlist.replace(match[0],"").trim().replace(/\s{2,}/g," "))},module.exports=exports},{"./SAT.min.js":8,lodash:12}],10:[function(require,module,exports){!function(root,factory){"function"==typeof define&&define.amd?define([],factory):"object"==typeof exports?module.exports=factory():root.returnExports=factory()}(this,function(){var Combo,keypress,_change_keycodes_by_browser,_compare_arrays,_compare_arrays_sorted,_convert_key_to_readable,_convert_to_shifted_key,_decide_meta_key,_factory_defaults,_filter_array,_is_array_in_array,_is_array_in_array_sorted,_key_is_valid,_keycode_alternate_names,_keycode_dictionary,_keycode_shifted_keys,_log_error,_metakey,_modifier_event_mapping,_modifier_keys,_validate_combo,__hasProp={}.hasOwnProperty,__indexOf=[].indexOf||function(item){for(var i=0,l=this.length;l>i;i++)if(i in this&&this[i]===item)return i;return-1};return _factory_defaults={is_unordered:!1,is_counting:!1,is_exclusive:!1,is_solitary:!1,prevent_default:!1,prevent_repeat:!1},_modifier_keys=["meta","alt","option","ctrl","shift","cmd"],_metakey="ctrl",keypress={},keypress.debug=!1,Combo=function(){function Combo(dictionary){var property,value;for(property in dictionary)__hasProp.call(dictionary,property)&&(value=dictionary[property],value!==!1&&(this[property]=value));this.keys=this.keys||[],this.count=this.count||0}return Combo.prototype.allows_key_repeat=function(){return!this.prevent_repeat&&"function"==typeof this.on_keydown},Combo.prototype.reset=function(){return this.count=0,this.keyup_fired=null},Combo}(),keypress.Listener=function(){function Listener(element,defaults){var attach_handler,property,value;this.should_suppress_event_defaults=!1,this.should_force_event_defaults=!1,this.sequence_delay=800,this._registered_combos=[],this._keys_down=[],this._active_combos=[],this._sequence=[],this._sequence_timer=null,this._prevent_capture=!1,this._defaults=defaults||{};for(property in _factory_defaults)__hasProp.call(_factory_defaults,property)&&(value=_factory_defaults[property],this._defaults[property]=this._defaults[property]||value);element=element||document.body,attach_handler=function(target,event,handler){return target.addEventListener?target.addEventListener(event,handler):target.attachEvent?target.attachEvent("on"+event,handler):void 0},attach_handler(element,"keydown",function(_this){return function(e){return e=e||window.event,_this._receive_input(e,!0),_this._bug_catcher(e)}}(this)),attach_handler(element,"keyup",function(_this){return function(e){return e=e||window.event,_this._receive_input(e,!1)}}(this)),attach_handler(window,"blur",function(_this){return function(){var key,_i,_len,_ref;for(_ref=_this._keys_down,_i=0,_len=_ref.length;_len>_i;_i++)key=_ref[_i],_this._key_up(key,{});return _this._keys_down=[]}}(this))}return Listener.prototype._bug_catcher=function(e){var _ref;return"cmd"===_metakey&&__indexOf.call(this._keys_down,"cmd")>=0&&"cmd"!==(_ref=_convert_key_to_readable(e.keyCode))&&"shift"!==_ref&&"alt"!==_ref&&"caps"!==_ref&&"tab"!==_ref?this._receive_input(e,!1):void 0},Listener.prototype._cmd_bug_check=function(combo_keys){return"cmd"===_metakey&&__indexOf.call(this._keys_down,"cmd")>=0&&__indexOf.call(combo_keys,"cmd")<0?!1:!0},Listener.prototype._prevent_default=function(e,should_prevent){return(should_prevent||this.should_suppress_event_defaults)&&!this.should_force_event_defaults&&(e.preventDefault?e.preventDefault():e.returnValue=!1,e.stopPropagation)?e.stopPropagation():void 0},Listener.prototype._get_active_combos=function(key){var active_combos,keys_down;return active_combos=[],keys_down=_filter_array(this._keys_down,function(down_key){return down_key!==key}),keys_down.push(key),this._match_combo_arrays(keys_down,function(_this){return function(match){return _this._cmd_bug_check(match.keys)?active_combos.push(match):void 0}}(this)),this._fuzzy_match_combo_arrays(keys_down,function(_this){return function(match){return __indexOf.call(active_combos,match)>=0?void 0:!match.is_solitary&&_this._cmd_bug_check(match.keys)?active_combos.push(match):void 0}}(this)),active_combos},Listener.prototype._get_potential_combos=function(key){var combo,potentials,_i,_len,_ref;for(potentials=[],_ref=this._registered_combos,_i=0,_len=_ref.length;_len>_i;_i++)combo=_ref[_i],combo.is_sequence||__indexOf.call(combo.keys,key)>=0&&this._cmd_bug_check(combo.keys)&&potentials.push(combo);return potentials},Listener.prototype._add_to_active_combos=function(combo){var active_combo,active_key,active_keys,already_replaced,combo_key,i,should_prepend,should_replace,_i,_j,_k,_len,_len1,_ref,_ref1;if(should_replace=!1,should_prepend=!0,already_replaced=!1,__indexOf.call(this._active_combos,combo)>=0)return!0;if(this._active_combos.length)for(i=_i=0,_ref=this._active_combos.length;_ref>=0?_ref>_i:_i>_ref;i=_ref>=0?++_i:--_i)if(active_combo=this._active_combos[i],active_combo&&active_combo.is_exclusive&&combo.is_exclusive){if(active_keys=active_combo.keys,!should_replace)for(_j=0,_len=active_keys.length;_len>_j;_j++)if(active_key=active_keys[_j],should_replace=!0,__indexOf.call(combo.keys,active_key)<0){should_replace=!1;break}if(should_prepend&&!should_replace)for(_ref1=combo.keys,_k=0,_len1=_ref1.length;_len1>_k;_k++)if(combo_key=_ref1[_k],should_prepend=!1,__indexOf.call(active_keys,combo_key)<0){should_prepend=!0;break}should_replace&&(already_replaced?(active_combo=this._active_combos.splice(i,1)[0],null!=active_combo&&active_combo.reset()):(active_combo=this._active_combos.splice(i,1,combo)[0],null!=active_combo&&active_combo.reset(),already_replaced=!0),should_prepend=!1)}return should_prepend&&this._active_combos.unshift(combo),should_replace||should_prepend},Listener.prototype._remove_from_active_combos=function(combo){var active_combo,i,_i,_ref;for(i=_i=0,_ref=this._active_combos.length;_ref>=0?_ref>_i:_i>_ref;i=_ref>=0?++_i:--_i)if(active_combo=this._active_combos[i],active_combo===combo){combo=this._active_combos.splice(i,1)[0],combo.reset();break}},Listener.prototype._get_possible_sequences=function(){var combo,i,j,match,matches,sequence,_i,_j,_k,_len,_ref,_ref1,_ref2;for(matches=[],_ref=this._registered_combos,_i=0,_len=_ref.length;_len>_i;_i++)for(combo=_ref[_i],j=_j=1,_ref1=this._sequence.length;_ref1>=1?_ref1>=_j:_j>=_ref1;j=_ref1>=1?++_j:--_j)if(sequence=this._sequence.slice(-j),combo.is_sequence&&(!(__indexOf.call(combo.keys,"shift")<0)||(sequence=_filter_array(sequence,function(key){return"shift"!==key}),sequence.length))){for(i=_k=0,_ref2=sequence.length;_ref2>=0?_ref2>_k:_k>_ref2;i=_ref2>=0?++_k:--_k){if(combo.keys[i]!==sequence[i]){match=!1;break}match=!0}match&&matches.push(combo)}return matches},Listener.prototype._add_key_to_sequence=function(key,e){var combo,sequence_combos,_i,_len;if(this._sequence.push(key),sequence_combos=this._get_possible_sequences(),sequence_combos.length){for(_i=0,_len=sequence_combos.length;_len>_i;_i++)combo=sequence_combos[_i],this._prevent_default(e,combo.prevent_default);this._sequence_timer&&clearTimeout(this._sequence_timer),this.sequence_delay>-1&&(this._sequence_timer=setTimeout(function(){return this._sequence=[]},this.sequence_delay))}else this._sequence=[]},Listener.prototype._get_sequence=function(key){var combo,i,j,match,seq_key,sequence,_i,_j,_k,_len,_ref,_ref1,_ref2;for(_ref=this._registered_combos,_i=0,_len=_ref.length;_len>_i;_i++)if(combo=_ref[_i],combo.is_sequence){for(j=_j=1,_ref1=this._sequence.length;_ref1>=1?_ref1>=_j:_j>=_ref1;j=_ref1>=1?++_j:--_j)if(sequence=_filter_array(this._sequence,function(seq_key){return __indexOf.call(combo.keys,"shift")>=0?!0:"shift"!==seq_key}).slice(-j),combo.keys.length===sequence.length)for(i=_k=0,_ref2=sequence.length;_ref2>=0?_ref2>_k:_k>_ref2;i=_ref2>=0?++_k:--_k)if(seq_key=sequence[i],!(__indexOf.call(combo.keys,"shift")<0&&"shift"===seq_key||"shift"===key&&__indexOf.call(combo.keys,"shift")<0)){if(combo.keys[i]!==seq_key){match=!1;break}match=!0}if(match)return combo}return!1},Listener.prototype._receive_input=function(e,is_keydown){var key;return this._prevent_capture?void(this._keys_down.length&&(this._keys_down=[])):(key=_convert_key_to_readable(e.keyCode),(is_keydown||this._keys_down.length||"alt"!==key&&key!==_metakey)&&key?is_keydown?this._key_down(key,e):this._key_up(key,e):void 0)},Listener.prototype._fire=function(event,combo,key_event,is_autorepeat){return"function"==typeof combo["on_"+event]&&this._prevent_default(key_event,combo["on_"+event].call(combo["this"],key_event,combo.count,is_autorepeat)!==!0),"release"===event&&(combo.count=0),"keyup"===event?combo.keyup_fired=!0:void 0},Listener.prototype._match_combo_arrays=function(potential_match,match_handler){var source_combo,_i,_len,_ref;for(_ref=this._registered_combos,_i=0,_len=_ref.length;_len>_i;_i++)source_combo=_ref[_i],(!source_combo.is_unordered&&_compare_arrays_sorted(potential_match,source_combo.keys)||source_combo.is_unordered&&_compare_arrays(potential_match,source_combo.keys))&&match_handler(source_combo)},Listener.prototype._fuzzy_match_combo_arrays=function(potential_match,match_handler){var source_combo,_i,_len,_ref;for(_ref=this._registered_combos,_i=0,_len=_ref.length;_len>_i;_i++)source_combo=_ref[_i],(!source_combo.is_unordered&&_is_array_in_array_sorted(source_combo.keys,potential_match)||source_combo.is_unordered&&_is_array_in_array(source_combo.keys,potential_match))&&match_handler(source_combo)},Listener.prototype._keys_remain=function(combo){var key,keys_remain,_i,_len,_ref;for(_ref=combo.keys,_i=0,_len=_ref.length;_len>_i;_i++)if(key=_ref[_i],__indexOf.call(this._keys_down,key)>=0){keys_remain=!0;break}return keys_remain},Listener.prototype._key_down=function(key,e){var combo,combos,event_mod,i,mod,potential,potential_combos,sequence_combo,shifted_key,_i,_j,_k,_len,_len1,_ref;shifted_key=_convert_to_shifted_key(key,e),shifted_key&&(key=shifted_key),this._add_key_to_sequence(key,e),sequence_combo=this._get_sequence(key),sequence_combo&&this._fire("keydown",sequence_combo,e);for(mod in _modifier_event_mapping)event_mod=_modifier_event_mapping[mod],e[event_mod]&&(mod===key||__indexOf.call(this._keys_down,mod)>=0||this._keys_down.push(mod));for(mod in _modifier_event_mapping)if(event_mod=_modifier_event_mapping[mod],mod!==key&&__indexOf.call(this._keys_down,mod)>=0&&!e[event_mod]){if("cmd"===mod&&"cmd"!==_metakey)continue;for(i=_i=0,_ref=this._keys_down.length;_ref>=0?_ref>_i:_i>_ref;i=_ref>=0?++_i:--_i)this._keys_down[i]===mod&&this._keys_down.splice(i,1)}for(combos=this._get_active_combos(key),potential_combos=this._get_potential_combos(key),_j=0,_len=combos.length;_len>_j;_j++)combo=combos[_j],this._handle_combo_down(combo,potential_combos,key,e);if(potential_combos.length)for(_k=0,_len1=potential_combos.length;_len1>_k;_k++)potential=potential_combos[_k],this._prevent_default(e,potential.prevent_default);__indexOf.call(this._keys_down,key)<0&&this._keys_down.push(key)},Listener.prototype._handle_combo_down=function(combo,potential_combos,key,e){var is_autorepeat,is_other_exclusive,potential_combo,result,_i,_len;if(__indexOf.call(combo.keys,key)<0)return!1;if(this._prevent_default(e,combo&&combo.prevent_default),is_autorepeat=!1,__indexOf.call(this._keys_down,key)>=0&&(is_autorepeat=!0,!combo.allows_key_repeat()))return!1;if(result=this._add_to_active_combos(combo,key),combo.keyup_fired=!1,is_other_exclusive=!1,combo.is_exclusive)for(_i=0,_len=potential_combos.length;_len>_i;_i++)if(potential_combo=potential_combos[_i],potential_combo.is_exclusive&&potential_combo.keys.length>combo.keys.length){is_other_exclusive=!0;
break}return!is_other_exclusive&&(combo.is_counting&&"function"==typeof combo.on_keydown&&(combo.count+=1),result)?this._fire("keydown",combo,e,is_autorepeat):void 0},Listener.prototype._key_up=function(key,e){var active_combo,active_combos_length,combo,combos,i,sequence_combo,shifted_key,unshifted_key,_i,_j,_k,_l,_len,_len1,_len2,_ref,_ref1,_ref2,_ref3;if(unshifted_key=key,shifted_key=_convert_to_shifted_key(key,e),shifted_key&&(key=shifted_key),shifted_key=_keycode_shifted_keys[unshifted_key],e.shiftKey?shifted_key&&__indexOf.call(this._keys_down,shifted_key)>=0||(key=unshifted_key):unshifted_key&&__indexOf.call(this._keys_down,unshifted_key)>=0||(key=shifted_key),sequence_combo=this._get_sequence(key),sequence_combo&&this._fire("keyup",sequence_combo,e),__indexOf.call(this._keys_down,key)<0)return!1;for(i=_i=0,_ref=this._keys_down.length;_ref>=0?_ref>_i:_i>_ref;i=_ref>=0?++_i:--_i)if((_ref1=this._keys_down[i])===key||_ref1===shifted_key||_ref1===unshifted_key){this._keys_down.splice(i,1);break}for(active_combos_length=this._active_combos.length,combos=[],_ref2=this._active_combos,_j=0,_len=_ref2.length;_len>_j;_j++)active_combo=_ref2[_j],__indexOf.call(active_combo.keys,key)>=0&&combos.push(active_combo);for(_k=0,_len1=combos.length;_len1>_k;_k++)combo=combos[_k],this._handle_combo_up(combo,e,key);if(active_combos_length>1)for(_ref3=this._active_combos,_l=0,_len2=_ref3.length;_len2>_l;_l++)active_combo=_ref3[_l],void 0===active_combo||__indexOf.call(combos,active_combo)>=0||this._keys_remain(active_combo)||this._remove_from_active_combos(active_combo)},Listener.prototype._handle_combo_up=function(combo,e,key){var keys_down,keys_remaining;this._prevent_default(e,combo&&combo.prevent_default),keys_remaining=this._keys_remain(combo),combo.keyup_fired||(keys_down=this._keys_down.slice(),keys_down.push(key),(!combo.is_solitary||_compare_arrays(keys_down,combo.keys))&&(this._fire("keyup",combo,e),combo.is_counting&&"function"==typeof combo.on_keyup&&"function"!=typeof combo.on_keydown&&(combo.count+=1))),keys_remaining||(this._fire("release",combo,e),this._remove_from_active_combos(combo))},Listener.prototype.simple_combo=function(keys,callback){return this.register_combo({keys:keys,on_keydown:callback})},Listener.prototype.counting_combo=function(keys,count_callback){return this.register_combo({keys:keys,is_counting:!0,is_unordered:!1,on_keydown:count_callback})},Listener.prototype.sequence_combo=function(keys,callback){return this.register_combo({keys:keys,on_keydown:callback,is_sequence:!0})},Listener.prototype.register_combo=function(combo_dictionary){var combo,property,value,_ref;"string"==typeof combo_dictionary.keys&&(combo_dictionary.keys=combo_dictionary.keys.split(" ")),_ref=this._defaults;for(property in _ref)__hasProp.call(_ref,property)&&(value=_ref[property],void 0===combo_dictionary[property]&&(combo_dictionary[property]=value));return combo=new Combo(combo_dictionary),_validate_combo(combo)?(this._registered_combos.push(combo),combo):void 0},Listener.prototype.register_many=function(combo_array){var combo,_i,_len,_results;for(_results=[],_i=0,_len=combo_array.length;_len>_i;_i++)combo=combo_array[_i],_results.push(this.register_combo(combo));return _results},Listener.prototype.unregister_combo=function(keys_or_combo){var combo,unregister_combo,_i,_len,_ref;if(!keys_or_combo)return!1;if(unregister_combo=function(_this){return function(combo){var i,_i,_ref,_results;for(_results=[],i=_i=0,_ref=_this._registered_combos.length;_ref>=0?_ref>_i:_i>_ref;i=_ref>=0?++_i:--_i){if(combo===_this._registered_combos[i]){_this._registered_combos.splice(i,1);break}_results.push(void 0)}return _results}}(this),keys_or_combo.keys)return unregister_combo(keys_or_combo);for(_ref=this._registered_combos,_i=0,_len=_ref.length;_len>_i;_i++){combo=_ref[_i]}return"string"==typeof keys_or_combo&&(keys_or_combo=keys_or_combo.split(" ")),combo.is_unordered&&_compare_arrays(keys_or_combo,combo.keys)||!combo.is_unordered&&_compare_arrays_sorted(keys_or_combo,combo.keys)?unregister_combo(combo):void 0},Listener.prototype.unregister_many=function(combo_array){var combo,_i,_len,_results;for(_results=[],_i=0,_len=combo_array.length;_len>_i;_i++)combo=combo_array[_i],_results.push(this.unregister_combo(combo));return _results},Listener.prototype.get_registered_combos=function(){return this._registered_combos},Listener.prototype.reset=function(){return this._registered_combos=[]},Listener.prototype.listen=function(){return this._prevent_capture=!1},Listener.prototype.stop_listening=function(){return this._prevent_capture=!0},Listener.prototype.get_meta_key=function(){return _metakey},Listener}(),_decide_meta_key=function(){-1!==navigator.userAgent.indexOf("Mac OS X")&&(_metakey="cmd")},_change_keycodes_by_browser=function(){-1!==navigator.userAgent.indexOf("Opera")&&(_keycode_dictionary[17]="cmd")},_convert_key_to_readable=function(k){return _keycode_dictionary[k]},_filter_array=function(array,callback){var element;return array.filter?array.filter(callback):function(){var _i,_len,_results;for(_results=[],_i=0,_len=array.length;_len>_i;_i++)element=array[_i],callback(element)&&_results.push(element);return _results}()},_compare_arrays=function(a1,a2){var item,_i,_len;if(a1.length!==a2.length)return!1;for(_i=0,_len=a1.length;_len>_i;_i++)if(item=a1[_i],!(__indexOf.call(a2,item)>=0))return!1;return!0},_compare_arrays_sorted=function(a1,a2){var i,_i,_ref;if(a1.length!==a2.length)return!1;for(i=_i=0,_ref=a1.length;_ref>=0?_ref>_i:_i>_ref;i=_ref>=0?++_i:--_i)if(a1[i]!==a2[i])return!1;return!0},_is_array_in_array=function(a1,a2){var item,_i,_len;for(_i=0,_len=a1.length;_len>_i;_i++)if(item=a1[_i],__indexOf.call(a2,item)<0)return!1;return!0},_is_array_in_array_sorted=function(a1,a2){var index,item,prev,_i,_len;for(prev=0,_i=0,_len=a1.length;_len>_i;_i++){if(item=a1[_i],index=a2.indexOf(item),!(index>=prev))return!1;prev=index}return!0},_log_error=function(){return keypress.debug?console.log.apply(console,arguments):void 0},_key_is_valid=function(key){var valid,valid_key,_;valid=!1;for(_ in _keycode_dictionary)if(valid_key=_keycode_dictionary[_],key===valid_key){valid=!0;break}if(!valid)for(_ in _keycode_shifted_keys)if(valid_key=_keycode_shifted_keys[_],key===valid_key){valid=!0;break}return valid},_validate_combo=function(combo){var alt_name,i,key,mod_key,non_modifier_keys,property,validated,value,_i,_j,_k,_len,_len1,_ref,_ref1;for(validated=!0,combo.keys.length||_log_error("You're trying to bind a combo with no keys:",combo),i=_i=0,_ref=combo.keys.length;_ref>=0?_ref>_i:_i>_ref;i=_ref>=0?++_i:--_i)key=combo.keys[i],alt_name=_keycode_alternate_names[key],alt_name&&(key=combo.keys[i]=alt_name),"meta"===key&&combo.keys.splice(i,1,_metakey),"cmd"===key&&_log_error('Warning: use the "meta" key rather than "cmd" for Windows compatibility');for(_ref1=combo.keys,_j=0,_len=_ref1.length;_len>_j;_j++)key=_ref1[_j],_key_is_valid(key)||(_log_error('Do not recognize the key "'+key+'"'),validated=!1);if(__indexOf.call(combo.keys,"meta")>=0||__indexOf.call(combo.keys,"cmd")>=0){for(non_modifier_keys=combo.keys.slice(),_k=0,_len1=_modifier_keys.length;_len1>_k;_k++)mod_key=_modifier_keys[_k],(i=non_modifier_keys.indexOf(mod_key))>-1&&non_modifier_keys.splice(i,1);non_modifier_keys.length>1&&(_log_error("META and CMD key combos cannot have more than 1 non-modifier keys",combo,non_modifier_keys),validated=!1)}for(property in combo)value=combo[property],"undefined"===_factory_defaults[property]&&_log_error("The property "+property+" is not a valid combo property. Your combo has still been registered.");return validated},_convert_to_shifted_key=function(key,e){var k;return e.shiftKey?(k=_keycode_shifted_keys[key],null!=k?k:!1):!1},_modifier_event_mapping={cmd:"metaKey",ctrl:"ctrlKey",shift:"shiftKey",alt:"altKey"},_keycode_alternate_names={escape:"esc",control:"ctrl",command:"cmd","break":"pause",windows:"cmd",option:"alt",caps_lock:"caps",apostrophe:"'",semicolon:";",tilde:"~",accent:"`",scroll_lock:"scroll",num_lock:"num"},_keycode_shifted_keys={"/":"?",".":">",",":"<","'":'"',";":":","[":"{","]":"}","\\":"|","`":"~","=":"+","-":"_",1:"!",2:"@",3:"#",4:"$",5:"%",6:"^",7:"&",8:"*",9:"(",0:")"},_keycode_dictionary={0:"\\",8:"backspace",9:"tab",12:"num",13:"enter",16:"shift",17:"ctrl",18:"alt",19:"pause",20:"caps",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",44:"print",45:"insert",46:"delete",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",65:"a",66:"b",67:"c",68:"d",69:"e",70:"f",71:"g",72:"h",73:"i",74:"j",75:"k",76:"l",77:"m",78:"n",79:"o",80:"p",81:"q",82:"r",83:"s",84:"t",85:"u",86:"v",87:"w",88:"x",89:"y",90:"z",91:"cmd",92:"cmd",93:"cmd",96:"num_0",97:"num_1",98:"num_2",99:"num_3",100:"num_4",101:"num_5",102:"num_6",103:"num_7",104:"num_8",105:"num_9",106:"num_multiply",107:"num_add",108:"num_enter",109:"num_subtract",110:"num_decimal",111:"num_divide",124:"print",144:"num",145:"scroll",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",223:"`",224:"cmd",225:"alt",57392:"ctrl",63289:"num",59:";"},_decide_meta_key(),_change_keycodes_by_browser(),keypress})},{}],11:[function(require){!function(require){"use strict";var Game=require("../models/game.js"),map1=require("../data/levels/level1.js"),map2=require("../data/levels/level2.js"),$=require("../support/functions.js").querySelector(document),kramer={sprite:"assets/kramer-sprite.gif",name:"Kramer",w:64,h:128},container=$("#game"),canvas=container.appendChild(document.createElement("canvas"));container.appendChild(canvas),canvas.setAttribute("id","canvas");var g=new Game(canvas,kramer);g.registerMap(map1),g.registerMap(map2),g.loadMap("Bedroom",{x:260,y:250}),g.launch()}(require)},{"../data/levels/level1.js":1,"../data/levels/level2.js":2,"../models/game.js":5,"../support/functions.js":9}],12:[function(require,module,exports){(function(global){(function(){function baseIndexOf(array,value,fromIndex){for(var index=(fromIndex||0)-1,length=array?array.length:0;++index<length;)if(array[index]===value)return index;return-1}function cacheIndexOf(cache,value){var type=typeof value;if(cache=cache.cache,"boolean"==type||null==value)return cache[value]?0:-1;"number"!=type&&"string"!=type&&(type="object");var key="number"==type?value:keyPrefix+value;return cache=(cache=cache[type])&&cache[key],"object"==type?cache&&baseIndexOf(cache,value)>-1?0:-1:cache?0:-1}function cachePush(value){var cache=this.cache,type=typeof value;if("boolean"==type||null==value)cache[value]=!0;else{"number"!=type&&"string"!=type&&(type="object");var key="number"==type?value:keyPrefix+value,typeCache=cache[type]||(cache[type]={});"object"==type?(typeCache[key]||(typeCache[key]=[])).push(value):typeCache[key]=!0}}function charAtCallback(value){return value.charCodeAt(0)}function compareAscending(a,b){for(var ac=a.criteria,bc=b.criteria,index=-1,length=ac.length;++index<length;){var value=ac[index],other=bc[index];if(value!==other){if(value>other||"undefined"==typeof value)return 1;if(other>value||"undefined"==typeof other)return-1}}return a.index-b.index}function createCache(array){var index=-1,length=array.length,first=array[0],mid=array[length/2|0],last=array[length-1];if(first&&"object"==typeof first&&mid&&"object"==typeof mid&&last&&"object"==typeof last)return!1;var cache=getObject();cache["false"]=cache["null"]=cache["true"]=cache.undefined=!1;var result=getObject();for(result.array=array,result.cache=cache,result.push=cachePush;++index<length;)result.push(array[index]);return result}function escapeStringChar(match){return"\\"+stringEscapes[match]}function getArray(){return arrayPool.pop()||[]}function getObject(){return objectPool.pop()||{array:null,cache:null,criteria:null,"false":!1,index:0,"null":!1,number:null,object:null,push:null,string:null,"true":!1,undefined:!1,value:null}}function releaseArray(array){array.length=0,arrayPool.length<maxPoolSize&&arrayPool.push(array)}function releaseObject(object){var cache=object.cache;cache&&releaseObject(cache),object.array=object.cache=object.criteria=object.object=object.number=object.string=object.value=null,objectPool.length<maxPoolSize&&objectPool.push(object)}function slice(array,start,end){start||(start=0),"undefined"==typeof end&&(end=array?array.length:0);for(var index=-1,length=end-start||0,result=Array(0>length?0:length);++index<length;)result[index]=array[start+index];return result}function runInContext(context){function lodash(value){return value&&"object"==typeof value&&!isArray(value)&&hasOwnProperty.call(value,"__wrapped__")?value:new lodashWrapper(value)}function lodashWrapper(value,chainAll){this.__chain__=!!chainAll,this.__wrapped__=value}function baseBind(bindData){function bound(){if(partialArgs){var args=slice(partialArgs);push.apply(args,arguments)}if(this instanceof bound){var thisBinding=baseCreate(func.prototype),result=func.apply(thisBinding,args||arguments);return isObject(result)?result:thisBinding}return func.apply(thisArg,args||arguments)}var func=bindData[0],partialArgs=bindData[2],thisArg=bindData[4];return setBindData(bound,bindData),bound}function baseClone(value,isDeep,callback,stackA,stackB){if(callback){var result=callback(value);if("undefined"!=typeof result)return result}var isObj=isObject(value);if(!isObj)return value;var className=toString.call(value);if(!cloneableClasses[className])return value;var ctor=ctorByClass[className];switch(className){case boolClass:case dateClass:return new ctor(+value);case numberClass:case stringClass:return new ctor(value);case regexpClass:return result=ctor(value.source,reFlags.exec(value)),result.lastIndex=value.lastIndex,result}var isArr=isArray(value);if(isDeep){var initedStack=!stackA;stackA||(stackA=getArray()),stackB||(stackB=getArray());for(var length=stackA.length;length--;)if(stackA[length]==value)return stackB[length];result=isArr?ctor(value.length):{}}else result=isArr?slice(value):assign({},value);return isArr&&(hasOwnProperty.call(value,"index")&&(result.index=value.index),hasOwnProperty.call(value,"input")&&(result.input=value.input)),isDeep?(stackA.push(value),stackB.push(result),(isArr?forEach:forOwn)(value,function(objValue,key){result[key]=baseClone(objValue,isDeep,callback,stackA,stackB)}),initedStack&&(releaseArray(stackA),releaseArray(stackB)),result):result}function baseCreate(prototype){return isObject(prototype)?nativeCreate(prototype):{}}function baseCreateCallback(func,thisArg,argCount){if("function"!=typeof func)return identity;if("undefined"==typeof thisArg||!("prototype"in func))return func;var bindData=func.__bindData__;if("undefined"==typeof bindData&&(support.funcNames&&(bindData=!func.name),bindData=bindData||!support.funcDecomp,!bindData)){var source=fnToString.call(func);support.funcNames||(bindData=!reFuncName.test(source)),bindData||(bindData=reThis.test(source),setBindData(func,bindData))}if(bindData===!1||bindData!==!0&&1&bindData[1])return func;switch(argCount){case 1:return function(value){return func.call(thisArg,value)};case 2:return function(a,b){return func.call(thisArg,a,b)};case 3:return function(value,index,collection){return func.call(thisArg,value,index,collection)};case 4:return function(accumulator,value,index,collection){return func.call(thisArg,accumulator,value,index,collection)}}return bind(func,thisArg)}function baseCreateWrapper(bindData){function bound(){var thisBinding=isBind?thisArg:this;if(partialArgs){var args=slice(partialArgs);push.apply(args,arguments)}if((partialRightArgs||isCurry)&&(args||(args=slice(arguments)),partialRightArgs&&push.apply(args,partialRightArgs),isCurry&&args.length<arity))return bitmask|=16,baseCreateWrapper([func,isCurryBound?bitmask:-4&bitmask,args,null,thisArg,arity]);if(args||(args=arguments),isBindKey&&(func=thisBinding[key]),this instanceof bound){thisBinding=baseCreate(func.prototype);var result=func.apply(thisBinding,args);return isObject(result)?result:thisBinding}return func.apply(thisBinding,args)}var func=bindData[0],bitmask=bindData[1],partialArgs=bindData[2],partialRightArgs=bindData[3],thisArg=bindData[4],arity=bindData[5],isBind=1&bitmask,isBindKey=2&bitmask,isCurry=4&bitmask,isCurryBound=8&bitmask,key=func;return setBindData(bound,bindData),bound}function baseDifference(array,values){var index=-1,indexOf=getIndexOf(),length=array?array.length:0,isLarge=length>=largeArraySize&&indexOf===baseIndexOf,result=[];if(isLarge){var cache=createCache(values);cache?(indexOf=cacheIndexOf,values=cache):isLarge=!1}for(;++index<length;){var value=array[index];indexOf(values,value)<0&&result.push(value)}return isLarge&&releaseObject(values),result}function baseFlatten(array,isShallow,isStrict,fromIndex){for(var index=(fromIndex||0)-1,length=array?array.length:0,result=[];++index<length;){var value=array[index];if(value&&"object"==typeof value&&"number"==typeof value.length&&(isArray(value)||isArguments(value))){isShallow||(value=baseFlatten(value,isShallow,isStrict));var valIndex=-1,valLength=value.length,resIndex=result.length;for(result.length+=valLength;++valIndex<valLength;)result[resIndex++]=value[valIndex]}else isStrict||result.push(value)}return result}function baseIsEqual(a,b,callback,isWhere,stackA,stackB){if(callback){var result=callback(a,b);if("undefined"!=typeof result)return!!result}if(a===b)return 0!==a||1/a==1/b;var type=typeof a,otherType=typeof b;if(!(a!==a||a&&objectTypes[type]||b&&objectTypes[otherType]))return!1;if(null==a||null==b)return a===b;var className=toString.call(a),otherClass=toString.call(b);if(className==argsClass&&(className=objectClass),otherClass==argsClass&&(otherClass=objectClass),className!=otherClass)return!1;switch(className){case boolClass:case dateClass:return+a==+b;case numberClass:return a!=+a?b!=+b:0==a?1/a==1/b:a==+b;case regexpClass:case stringClass:return a==String(b)}var isArr=className==arrayClass;if(!isArr){var aWrapped=hasOwnProperty.call(a,"__wrapped__"),bWrapped=hasOwnProperty.call(b,"__wrapped__");if(aWrapped||bWrapped)return baseIsEqual(aWrapped?a.__wrapped__:a,bWrapped?b.__wrapped__:b,callback,isWhere,stackA,stackB);if(className!=objectClass)return!1;var ctorA=a.constructor,ctorB=b.constructor;if(ctorA!=ctorB&&!(isFunction(ctorA)&&ctorA instanceof ctorA&&isFunction(ctorB)&&ctorB instanceof ctorB)&&"constructor"in a&&"constructor"in b)return!1}var initedStack=!stackA;stackA||(stackA=getArray()),stackB||(stackB=getArray());for(var length=stackA.length;length--;)if(stackA[length]==a)return stackB[length]==b;var size=0;if(result=!0,stackA.push(a),stackB.push(b),isArr){if(length=a.length,size=b.length,result=size==length,result||isWhere)for(;size--;){var index=length,value=b[size];if(isWhere)for(;index--&&!(result=baseIsEqual(a[index],value,callback,isWhere,stackA,stackB)););else if(!(result=baseIsEqual(a[size],value,callback,isWhere,stackA,stackB)))break}}else forIn(b,function(value,key,b){return hasOwnProperty.call(b,key)?(size++,result=hasOwnProperty.call(a,key)&&baseIsEqual(a[key],value,callback,isWhere,stackA,stackB)):void 0}),result&&!isWhere&&forIn(a,function(value,key,a){return hasOwnProperty.call(a,key)?result=--size>-1:void 0});return stackA.pop(),stackB.pop(),initedStack&&(releaseArray(stackA),releaseArray(stackB)),result}function baseMerge(object,source,callback,stackA,stackB){(isArray(source)?forEach:forOwn)(source,function(source,key){var found,isArr,result=source,value=object[key];if(source&&((isArr=isArray(source))||isPlainObject(source))){for(var stackLength=stackA.length;stackLength--;)if(found=stackA[stackLength]==source){value=stackB[stackLength];break}if(!found){var isShallow;callback&&(result=callback(value,source),(isShallow="undefined"!=typeof result)&&(value=result)),isShallow||(value=isArr?isArray(value)?value:[]:isPlainObject(value)?value:{}),stackA.push(source),stackB.push(value),isShallow||baseMerge(value,source,callback,stackA,stackB)}}else callback&&(result=callback(value,source),"undefined"==typeof result&&(result=source)),"undefined"!=typeof result&&(value=result);object[key]=value})}function baseRandom(min,max){return min+floor(nativeRandom()*(max-min+1))}function baseUniq(array,isSorted,callback){var index=-1,indexOf=getIndexOf(),length=array?array.length:0,result=[],isLarge=!isSorted&&length>=largeArraySize&&indexOf===baseIndexOf,seen=callback||isLarge?getArray():result;if(isLarge){var cache=createCache(seen);indexOf=cacheIndexOf,seen=cache}for(;++index<length;){var value=array[index],computed=callback?callback(value,index,array):value;(isSorted?!index||seen[seen.length-1]!==computed:indexOf(seen,computed)<0)&&((callback||isLarge)&&seen.push(computed),result.push(value))}return isLarge?(releaseArray(seen.array),releaseObject(seen)):callback&&releaseArray(seen),result}function createAggregator(setter){return function(collection,callback,thisArg){var result={};callback=lodash.createCallback(callback,thisArg,3);var index=-1,length=collection?collection.length:0;if("number"==typeof length)for(;++index<length;){var value=collection[index];setter(result,value,callback(value,index,collection),collection)}else forOwn(collection,function(value,key,collection){setter(result,value,callback(value,key,collection),collection)});return result}}function createWrapper(func,bitmask,partialArgs,partialRightArgs,thisArg,arity){var isBind=1&bitmask,isBindKey=2&bitmask,isCurry=4&bitmask,isPartial=16&bitmask,isPartialRight=32&bitmask;if(!isBindKey&&!isFunction(func))throw new TypeError;isPartial&&!partialArgs.length&&(bitmask&=-17,isPartial=partialArgs=!1),isPartialRight&&!partialRightArgs.length&&(bitmask&=-33,isPartialRight=partialRightArgs=!1);var bindData=func&&func.__bindData__;if(bindData&&bindData!==!0)return bindData=slice(bindData),bindData[2]&&(bindData[2]=slice(bindData[2])),bindData[3]&&(bindData[3]=slice(bindData[3])),!isBind||1&bindData[1]||(bindData[4]=thisArg),!isBind&&1&bindData[1]&&(bitmask|=8),!isCurry||4&bindData[1]||(bindData[5]=arity),isPartial&&push.apply(bindData[2]||(bindData[2]=[]),partialArgs),isPartialRight&&unshift.apply(bindData[3]||(bindData[3]=[]),partialRightArgs),bindData[1]|=bitmask,createWrapper.apply(null,bindData);var creater=1==bitmask||17===bitmask?baseBind:baseCreateWrapper;return creater([func,bitmask,partialArgs,partialRightArgs,thisArg,arity])}function escapeHtmlChar(match){return htmlEscapes[match]}function getIndexOf(){var result=(result=lodash.indexOf)===indexOf?baseIndexOf:result;return result}function isNative(value){return"function"==typeof value&&reNative.test(value)}function shimIsPlainObject(value){var ctor,result;return value&&toString.call(value)==objectClass&&(ctor=value.constructor,!isFunction(ctor)||ctor instanceof ctor)?(forIn(value,function(value,key){result=key}),"undefined"==typeof result||hasOwnProperty.call(value,result)):!1}function unescapeHtmlChar(match){return htmlUnescapes[match]}function isArguments(value){return value&&"object"==typeof value&&"number"==typeof value.length&&toString.call(value)==argsClass||!1}function clone(value,isDeep,callback,thisArg){return"boolean"!=typeof isDeep&&null!=isDeep&&(thisArg=callback,callback=isDeep,isDeep=!1),baseClone(value,isDeep,"function"==typeof callback&&baseCreateCallback(callback,thisArg,1))}function cloneDeep(value,callback,thisArg){return baseClone(value,!0,"function"==typeof callback&&baseCreateCallback(callback,thisArg,1))}function create(prototype,properties){var result=baseCreate(prototype);return properties?assign(result,properties):result}function findKey(object,callback,thisArg){var result;return callback=lodash.createCallback(callback,thisArg,3),forOwn(object,function(value,key,object){return callback(value,key,object)?(result=key,!1):void 0}),result}function findLastKey(object,callback,thisArg){var result;return callback=lodash.createCallback(callback,thisArg,3),forOwnRight(object,function(value,key,object){return callback(value,key,object)?(result=key,!1):void 0}),result}function forInRight(object,callback,thisArg){var pairs=[];forIn(object,function(value,key){pairs.push(key,value)});var length=pairs.length;for(callback=baseCreateCallback(callback,thisArg,3);length--&&callback(pairs[length--],pairs[length],object)!==!1;);return object}function forOwnRight(object,callback,thisArg){var props=keys(object),length=props.length;for(callback=baseCreateCallback(callback,thisArg,3);length--;){var key=props[length];if(callback(object[key],key,object)===!1)break}return object}function functions(object){var result=[];return forIn(object,function(value,key){isFunction(value)&&result.push(key)}),result.sort()}function has(object,key){return object?hasOwnProperty.call(object,key):!1}function invert(object){for(var index=-1,props=keys(object),length=props.length,result={};++index<length;){var key=props[index];result[object[key]]=key}return result}function isBoolean(value){return value===!0||value===!1||value&&"object"==typeof value&&toString.call(value)==boolClass||!1}function isDate(value){return value&&"object"==typeof value&&toString.call(value)==dateClass||!1}function isElement(value){return value&&1===value.nodeType||!1}function isEmpty(value){var result=!0;if(!value)return result;var className=toString.call(value),length=value.length;return className==arrayClass||className==stringClass||className==argsClass||className==objectClass&&"number"==typeof length&&isFunction(value.splice)?!length:(forOwn(value,function(){return result=!1}),result)}function isEqual(a,b,callback,thisArg){return baseIsEqual(a,b,"function"==typeof callback&&baseCreateCallback(callback,thisArg,2))}function isFinite(value){return nativeIsFinite(value)&&!nativeIsNaN(parseFloat(value))}function isFunction(value){return"function"==typeof value}function isObject(value){return!(!value||!objectTypes[typeof value])}function isNaN(value){return isNumber(value)&&value!=+value}function isNull(value){return null===value}function isNumber(value){return"number"==typeof value||value&&"object"==typeof value&&toString.call(value)==numberClass||!1}function isRegExp(value){return value&&"object"==typeof value&&toString.call(value)==regexpClass||!1}function isString(value){return"string"==typeof value||value&&"object"==typeof value&&toString.call(value)==stringClass||!1}function isUndefined(value){return"undefined"==typeof value}function mapValues(object,callback,thisArg){var result={};return callback=lodash.createCallback(callback,thisArg,3),forOwn(object,function(value,key,object){result[key]=callback(value,key,object)}),result}function merge(object){var args=arguments,length=2;if(!isObject(object))return object;if("number"!=typeof args[2]&&(length=args.length),length>3&&"function"==typeof args[length-2])var callback=baseCreateCallback(args[--length-1],args[length--],2);else length>2&&"function"==typeof args[length-1]&&(callback=args[--length]);for(var sources=slice(arguments,1,length),index=-1,stackA=getArray(),stackB=getArray();++index<length;)baseMerge(object,sources[index],callback,stackA,stackB);return releaseArray(stackA),releaseArray(stackB),object}function omit(object,callback,thisArg){var result={};if("function"!=typeof callback){var props=[];forIn(object,function(value,key){props.push(key)}),props=baseDifference(props,baseFlatten(arguments,!0,!1,1));for(var index=-1,length=props.length;++index<length;){var key=props[index];result[key]=object[key]}}else callback=lodash.createCallback(callback,thisArg,3),forIn(object,function(value,key,object){callback(value,key,object)||(result[key]=value)});return result}function pairs(object){for(var index=-1,props=keys(object),length=props.length,result=Array(length);++index<length;){var key=props[index];result[index]=[key,object[key]]}return result}function pick(object,callback,thisArg){var result={};if("function"!=typeof callback)for(var index=-1,props=baseFlatten(arguments,!0,!1,1),length=isObject(object)?props.length:0;++index<length;){var key=props[index];key in object&&(result[key]=object[key])}else callback=lodash.createCallback(callback,thisArg,3),forIn(object,function(value,key,object){callback(value,key,object)&&(result[key]=value)});return result}function transform(object,callback,accumulator,thisArg){var isArr=isArray(object);if(null==accumulator)if(isArr)accumulator=[];else{var ctor=object&&object.constructor,proto=ctor&&ctor.prototype;accumulator=baseCreate(proto)}return callback&&(callback=lodash.createCallback(callback,thisArg,4),(isArr?forEach:forOwn)(object,function(value,index,object){return callback(accumulator,value,index,object)})),accumulator}function values(object){for(var index=-1,props=keys(object),length=props.length,result=Array(length);++index<length;)result[index]=object[props[index]];return result}function at(collection){for(var args=arguments,index=-1,props=baseFlatten(args,!0,!1,1),length=args[2]&&args[2][args[1]]===collection?1:props.length,result=Array(length);++index<length;)result[index]=collection[props[index]];return result}function contains(collection,target,fromIndex){var index=-1,indexOf=getIndexOf(),length=collection?collection.length:0,result=!1;return fromIndex=(0>fromIndex?nativeMax(0,length+fromIndex):fromIndex)||0,isArray(collection)?result=indexOf(collection,target,fromIndex)>-1:"number"==typeof length?result=(isString(collection)?collection.indexOf(target,fromIndex):indexOf(collection,target,fromIndex))>-1:forOwn(collection,function(value){return++index>=fromIndex?!(result=value===target):void 0}),result}function every(collection,callback,thisArg){var result=!0;callback=lodash.createCallback(callback,thisArg,3);var index=-1,length=collection?collection.length:0;if("number"==typeof length)for(;++index<length&&(result=!!callback(collection[index],index,collection)););else forOwn(collection,function(value,index,collection){return result=!!callback(value,index,collection)});return result}function filter(collection,callback,thisArg){var result=[];callback=lodash.createCallback(callback,thisArg,3);var index=-1,length=collection?collection.length:0;if("number"==typeof length)for(;++index<length;){var value=collection[index];callback(value,index,collection)&&result.push(value)}else forOwn(collection,function(value,index,collection){callback(value,index,collection)&&result.push(value)});return result}function find(collection,callback,thisArg){callback=lodash.createCallback(callback,thisArg,3);var index=-1,length=collection?collection.length:0;if("number"!=typeof length){var result;return forOwn(collection,function(value,index,collection){return callback(value,index,collection)?(result=value,!1):void 0}),result}for(;++index<length;){var value=collection[index];if(callback(value,index,collection))return value}}function findLast(collection,callback,thisArg){var result;return callback=lodash.createCallback(callback,thisArg,3),forEachRight(collection,function(value,index,collection){return callback(value,index,collection)?(result=value,!1):void 0}),result}function forEach(collection,callback,thisArg){var index=-1,length=collection?collection.length:0;if(callback=callback&&"undefined"==typeof thisArg?callback:baseCreateCallback(callback,thisArg,3),"number"==typeof length)for(;++index<length&&callback(collection[index],index,collection)!==!1;);else forOwn(collection,callback);return collection}function forEachRight(collection,callback,thisArg){var length=collection?collection.length:0;if(callback=callback&&"undefined"==typeof thisArg?callback:baseCreateCallback(callback,thisArg,3),"number"==typeof length)for(;length--&&callback(collection[length],length,collection)!==!1;);else{var props=keys(collection);length=props.length,forOwn(collection,function(value,key,collection){return key=props?props[--length]:--length,callback(collection[key],key,collection)})}return collection}function invoke(collection,methodName){var args=slice(arguments,2),index=-1,isFunc="function"==typeof methodName,length=collection?collection.length:0,result=Array("number"==typeof length?length:0);return forEach(collection,function(value){result[++index]=(isFunc?methodName:value[methodName]).apply(value,args)
}),result}function map(collection,callback,thisArg){var index=-1,length=collection?collection.length:0;if(callback=lodash.createCallback(callback,thisArg,3),"number"==typeof length)for(var result=Array(length);++index<length;)result[index]=callback(collection[index],index,collection);else result=[],forOwn(collection,function(value,key,collection){result[++index]=callback(value,key,collection)});return result}function max(collection,callback,thisArg){var computed=-1/0,result=computed;if("function"!=typeof callback&&thisArg&&thisArg[callback]===collection&&(callback=null),null==callback&&isArray(collection))for(var index=-1,length=collection.length;++index<length;){var value=collection[index];value>result&&(result=value)}else callback=null==callback&&isString(collection)?charAtCallback:lodash.createCallback(callback,thisArg,3),forEach(collection,function(value,index,collection){var current=callback(value,index,collection);current>computed&&(computed=current,result=value)});return result}function min(collection,callback,thisArg){var computed=1/0,result=computed;if("function"!=typeof callback&&thisArg&&thisArg[callback]===collection&&(callback=null),null==callback&&isArray(collection))for(var index=-1,length=collection.length;++index<length;){var value=collection[index];result>value&&(result=value)}else callback=null==callback&&isString(collection)?charAtCallback:lodash.createCallback(callback,thisArg,3),forEach(collection,function(value,index,collection){var current=callback(value,index,collection);computed>current&&(computed=current,result=value)});return result}function reduce(collection,callback,accumulator,thisArg){if(!collection)return accumulator;var noaccum=arguments.length<3;callback=lodash.createCallback(callback,thisArg,4);var index=-1,length=collection.length;if("number"==typeof length)for(noaccum&&(accumulator=collection[++index]);++index<length;)accumulator=callback(accumulator,collection[index],index,collection);else forOwn(collection,function(value,index,collection){accumulator=noaccum?(noaccum=!1,value):callback(accumulator,value,index,collection)});return accumulator}function reduceRight(collection,callback,accumulator,thisArg){var noaccum=arguments.length<3;return callback=lodash.createCallback(callback,thisArg,4),forEachRight(collection,function(value,index,collection){accumulator=noaccum?(noaccum=!1,value):callback(accumulator,value,index,collection)}),accumulator}function reject(collection,callback,thisArg){return callback=lodash.createCallback(callback,thisArg,3),filter(collection,function(value,index,collection){return!callback(value,index,collection)})}function sample(collection,n,guard){if(collection&&"number"!=typeof collection.length&&(collection=values(collection)),null==n||guard)return collection?collection[baseRandom(0,collection.length-1)]:undefined;var result=shuffle(collection);return result.length=nativeMin(nativeMax(0,n),result.length),result}function shuffle(collection){var index=-1,length=collection?collection.length:0,result=Array("number"==typeof length?length:0);return forEach(collection,function(value){var rand=baseRandom(0,++index);result[index]=result[rand],result[rand]=value}),result}function size(collection){var length=collection?collection.length:0;return"number"==typeof length?length:keys(collection).length}function some(collection,callback,thisArg){var result;callback=lodash.createCallback(callback,thisArg,3);var index=-1,length=collection?collection.length:0;if("number"==typeof length)for(;++index<length&&!(result=callback(collection[index],index,collection)););else forOwn(collection,function(value,index,collection){return!(result=callback(value,index,collection))});return!!result}function sortBy(collection,callback,thisArg){var index=-1,isArr=isArray(callback),length=collection?collection.length:0,result=Array("number"==typeof length?length:0);for(isArr||(callback=lodash.createCallback(callback,thisArg,3)),forEach(collection,function(value,key,collection){var object=result[++index]=getObject();isArr?object.criteria=map(callback,function(key){return value[key]}):(object.criteria=getArray())[0]=callback(value,key,collection),object.index=index,object.value=value}),length=result.length,result.sort(compareAscending);length--;){var object=result[length];result[length]=object.value,isArr||releaseArray(object.criteria),releaseObject(object)}return result}function toArray(collection){return collection&&"number"==typeof collection.length?slice(collection):values(collection)}function compact(array){for(var index=-1,length=array?array.length:0,result=[];++index<length;){var value=array[index];value&&result.push(value)}return result}function difference(array){return baseDifference(array,baseFlatten(arguments,!0,!0,1))}function findIndex(array,callback,thisArg){var index=-1,length=array?array.length:0;for(callback=lodash.createCallback(callback,thisArg,3);++index<length;)if(callback(array[index],index,array))return index;return-1}function findLastIndex(array,callback,thisArg){var length=array?array.length:0;for(callback=lodash.createCallback(callback,thisArg,3);length--;)if(callback(array[length],length,array))return length;return-1}function first(array,callback,thisArg){var n=0,length=array?array.length:0;if("number"!=typeof callback&&null!=callback){var index=-1;for(callback=lodash.createCallback(callback,thisArg,3);++index<length&&callback(array[index],index,array);)n++}else if(n=callback,null==n||thisArg)return array?array[0]:undefined;return slice(array,0,nativeMin(nativeMax(0,n),length))}function flatten(array,isShallow,callback,thisArg){return"boolean"!=typeof isShallow&&null!=isShallow&&(thisArg=callback,callback="function"!=typeof isShallow&&thisArg&&thisArg[isShallow]===array?null:isShallow,isShallow=!1),null!=callback&&(array=map(array,callback,thisArg)),baseFlatten(array,isShallow)}function indexOf(array,value,fromIndex){if("number"==typeof fromIndex){var length=array?array.length:0;fromIndex=0>fromIndex?nativeMax(0,length+fromIndex):fromIndex||0}else if(fromIndex){var index=sortedIndex(array,value);return array[index]===value?index:-1}return baseIndexOf(array,value,fromIndex)}function initial(array,callback,thisArg){var n=0,length=array?array.length:0;if("number"!=typeof callback&&null!=callback){var index=length;for(callback=lodash.createCallback(callback,thisArg,3);index--&&callback(array[index],index,array);)n++}else n=null==callback||thisArg?1:callback||n;return slice(array,0,nativeMin(nativeMax(0,length-n),length))}function intersection(){for(var args=[],argsIndex=-1,argsLength=arguments.length,caches=getArray(),indexOf=getIndexOf(),trustIndexOf=indexOf===baseIndexOf,seen=getArray();++argsIndex<argsLength;){var value=arguments[argsIndex];(isArray(value)||isArguments(value))&&(args.push(value),caches.push(trustIndexOf&&value.length>=largeArraySize&&createCache(argsIndex?args[argsIndex]:seen)))}var array=args[0],index=-1,length=array?array.length:0,result=[];outer:for(;++index<length;){var cache=caches[0];if(value=array[index],(cache?cacheIndexOf(cache,value):indexOf(seen,value))<0){for(argsIndex=argsLength,(cache||seen).push(value);--argsIndex;)if(cache=caches[argsIndex],(cache?cacheIndexOf(cache,value):indexOf(args[argsIndex],value))<0)continue outer;result.push(value)}}for(;argsLength--;)cache=caches[argsLength],cache&&releaseObject(cache);return releaseArray(caches),releaseArray(seen),result}function last(array,callback,thisArg){var n=0,length=array?array.length:0;if("number"!=typeof callback&&null!=callback){var index=length;for(callback=lodash.createCallback(callback,thisArg,3);index--&&callback(array[index],index,array);)n++}else if(n=callback,null==n||thisArg)return array?array[length-1]:undefined;return slice(array,nativeMax(0,length-n))}function lastIndexOf(array,value,fromIndex){var index=array?array.length:0;for("number"==typeof fromIndex&&(index=(0>fromIndex?nativeMax(0,index+fromIndex):nativeMin(fromIndex,index-1))+1);index--;)if(array[index]===value)return index;return-1}function pull(array){for(var args=arguments,argsIndex=0,argsLength=args.length,length=array?array.length:0;++argsIndex<argsLength;)for(var index=-1,value=args[argsIndex];++index<length;)array[index]===value&&(splice.call(array,index--,1),length--);return array}function range(start,end,step){start=+start||0,step="number"==typeof step?step:+step||1,null==end&&(end=start,start=0);for(var index=-1,length=nativeMax(0,ceil((end-start)/(step||1))),result=Array(length);++index<length;)result[index]=start,start+=step;return result}function remove(array,callback,thisArg){var index=-1,length=array?array.length:0,result=[];for(callback=lodash.createCallback(callback,thisArg,3);++index<length;){var value=array[index];callback(value,index,array)&&(result.push(value),splice.call(array,index--,1),length--)}return result}function rest(array,callback,thisArg){if("number"!=typeof callback&&null!=callback){var n=0,index=-1,length=array?array.length:0;for(callback=lodash.createCallback(callback,thisArg,3);++index<length&&callback(array[index],index,array);)n++}else n=null==callback||thisArg?1:nativeMax(0,callback);return slice(array,n)}function sortedIndex(array,value,callback,thisArg){var low=0,high=array?array.length:low;for(callback=callback?lodash.createCallback(callback,thisArg,1):identity,value=callback(value);high>low;){var mid=low+high>>>1;callback(array[mid])<value?low=mid+1:high=mid}return low}function union(){return baseUniq(baseFlatten(arguments,!0,!0))}function uniq(array,isSorted,callback,thisArg){return"boolean"!=typeof isSorted&&null!=isSorted&&(thisArg=callback,callback="function"!=typeof isSorted&&thisArg&&thisArg[isSorted]===array?null:isSorted,isSorted=!1),null!=callback&&(callback=lodash.createCallback(callback,thisArg,3)),baseUniq(array,isSorted,callback)}function without(array){return baseDifference(array,slice(arguments,1))}function xor(){for(var index=-1,length=arguments.length;++index<length;){var array=arguments[index];if(isArray(array)||isArguments(array))var result=result?baseUniq(baseDifference(result,array).concat(baseDifference(array,result))):array}return result||[]}function zip(){for(var array=arguments.length>1?arguments:arguments[0],index=-1,length=array?max(pluck(array,"length")):0,result=Array(0>length?0:length);++index<length;)result[index]=pluck(array,index);return result}function zipObject(keys,values){var index=-1,length=keys?keys.length:0,result={};for(values||!length||isArray(keys[0])||(values=[]);++index<length;){var key=keys[index];values?result[key]=values[index]:key&&(result[key[0]]=key[1])}return result}function after(n,func){if(!isFunction(func))throw new TypeError;return function(){return--n<1?func.apply(this,arguments):void 0}}function bind(func,thisArg){return arguments.length>2?createWrapper(func,17,slice(arguments,2),null,thisArg):createWrapper(func,1,null,null,thisArg)}function bindAll(object){for(var funcs=arguments.length>1?baseFlatten(arguments,!0,!1,1):functions(object),index=-1,length=funcs.length;++index<length;){var key=funcs[index];object[key]=createWrapper(object[key],1,null,null,object)}return object}function bindKey(object,key){return arguments.length>2?createWrapper(key,19,slice(arguments,2),null,object):createWrapper(key,3,null,null,object)}function compose(){for(var funcs=arguments,length=funcs.length;length--;)if(!isFunction(funcs[length]))throw new TypeError;return function(){for(var args=arguments,length=funcs.length;length--;)args=[funcs[length].apply(this,args)];return args[0]}}function curry(func,arity){return arity="number"==typeof arity?arity:+arity||func.length,createWrapper(func,4,null,null,null,arity)}function debounce(func,wait,options){var args,maxTimeoutId,result,stamp,thisArg,timeoutId,trailingCall,lastCalled=0,maxWait=!1,trailing=!0;if(!isFunction(func))throw new TypeError;if(wait=nativeMax(0,wait)||0,options===!0){var leading=!0;trailing=!1}else isObject(options)&&(leading=options.leading,maxWait="maxWait"in options&&(nativeMax(wait,options.maxWait)||0),trailing="trailing"in options?options.trailing:trailing);var delayed=function(){var remaining=wait-(now()-stamp);if(0>=remaining){maxTimeoutId&&clearTimeout(maxTimeoutId);var isCalled=trailingCall;maxTimeoutId=timeoutId=trailingCall=undefined,isCalled&&(lastCalled=now(),result=func.apply(thisArg,args),timeoutId||maxTimeoutId||(args=thisArg=null))}else timeoutId=setTimeout(delayed,remaining)},maxDelayed=function(){timeoutId&&clearTimeout(timeoutId),maxTimeoutId=timeoutId=trailingCall=undefined,(trailing||maxWait!==wait)&&(lastCalled=now(),result=func.apply(thisArg,args),timeoutId||maxTimeoutId||(args=thisArg=null))};return function(){if(args=arguments,stamp=now(),thisArg=this,trailingCall=trailing&&(timeoutId||!leading),maxWait===!1)var leadingCall=leading&&!timeoutId;else{maxTimeoutId||leading||(lastCalled=stamp);var remaining=maxWait-(stamp-lastCalled),isCalled=0>=remaining;isCalled?(maxTimeoutId&&(maxTimeoutId=clearTimeout(maxTimeoutId)),lastCalled=stamp,result=func.apply(thisArg,args)):maxTimeoutId||(maxTimeoutId=setTimeout(maxDelayed,remaining))}return isCalled&&timeoutId?timeoutId=clearTimeout(timeoutId):timeoutId||wait===maxWait||(timeoutId=setTimeout(delayed,wait)),leadingCall&&(isCalled=!0,result=func.apply(thisArg,args)),!isCalled||timeoutId||maxTimeoutId||(args=thisArg=null),result}}function defer(func){if(!isFunction(func))throw new TypeError;var args=slice(arguments,1);return setTimeout(function(){func.apply(undefined,args)},1)}function delay(func,wait){if(!isFunction(func))throw new TypeError;var args=slice(arguments,2);return setTimeout(function(){func.apply(undefined,args)},wait)}function memoize(func,resolver){if(!isFunction(func))throw new TypeError;var memoized=function(){var cache=memoized.cache,key=resolver?resolver.apply(this,arguments):keyPrefix+arguments[0];return hasOwnProperty.call(cache,key)?cache[key]:cache[key]=func.apply(this,arguments)};return memoized.cache={},memoized}function once(func){var ran,result;if(!isFunction(func))throw new TypeError;return function(){return ran?result:(ran=!0,result=func.apply(this,arguments),func=null,result)}}function partial(func){return createWrapper(func,16,slice(arguments,1))}function partialRight(func){return createWrapper(func,32,null,slice(arguments,1))}function throttle(func,wait,options){var leading=!0,trailing=!0;if(!isFunction(func))throw new TypeError;return options===!1?leading=!1:isObject(options)&&(leading="leading"in options?options.leading:leading,trailing="trailing"in options?options.trailing:trailing),debounceOptions.leading=leading,debounceOptions.maxWait=wait,debounceOptions.trailing=trailing,debounce(func,wait,debounceOptions)}function wrap(value,wrapper){return createWrapper(wrapper,16,[value])}function constant(value){return function(){return value}}function createCallback(func,thisArg,argCount){var type=typeof func;if(null==func||"function"==type)return baseCreateCallback(func,thisArg,argCount);if("object"!=type)return property(func);var props=keys(func),key=props[0],a=func[key];return 1!=props.length||a!==a||isObject(a)?function(object){for(var length=props.length,result=!1;length--&&(result=baseIsEqual(object[props[length]],func[props[length]],null,!0)););return result}:function(object){var b=object[key];return a===b&&(0!==a||1/a==1/b)}}function escape(string){return null==string?"":String(string).replace(reUnescapedHtml,escapeHtmlChar)}function identity(value){return value}function mixin(object,source,options){var chain=!0,methodNames=source&&functions(source);source&&(options||methodNames.length)||(null==options&&(options=source),ctor=lodashWrapper,source=object,object=lodash,methodNames=functions(source)),options===!1?chain=!1:isObject(options)&&"chain"in options&&(chain=options.chain);var ctor=object,isFunc=isFunction(ctor);forEach(methodNames,function(methodName){var func=object[methodName]=source[methodName];isFunc&&(ctor.prototype[methodName]=function(){var chainAll=this.__chain__,value=this.__wrapped__,args=[value];push.apply(args,arguments);var result=func.apply(object,args);if(chain||chainAll){if(value===result&&isObject(result))return this;result=new ctor(result),result.__chain__=chainAll}return result})})}function noConflict(){return context._=oldDash,this}function noop(){}function property(key){return function(object){return object[key]}}function random(min,max,floating){var noMin=null==min,noMax=null==max;if(null==floating&&("boolean"==typeof min&&noMax?(floating=min,min=1):noMax||"boolean"!=typeof max||(floating=max,noMax=!0)),noMin&&noMax&&(max=1),min=+min||0,noMax?(max=min,min=0):max=+max||0,floating||min%1||max%1){var rand=nativeRandom();return nativeMin(min+rand*(max-min+parseFloat("1e-"+((rand+"").length-1))),max)}return baseRandom(min,max)}function result(object,key){if(object){var value=object[key];return isFunction(value)?object[key]():value}}function template(text,data,options){var settings=lodash.templateSettings;text=String(text||""),options=defaults({},options,settings);var isEvaluating,imports=defaults({},options.imports,settings.imports),importsKeys=keys(imports),importsValues=values(imports),index=0,interpolate=options.interpolate||reNoMatch,source="__p += '",reDelimiters=RegExp((options.escape||reNoMatch).source+"|"+interpolate.source+"|"+(interpolate===reInterpolate?reEsTemplate:reNoMatch).source+"|"+(options.evaluate||reNoMatch).source+"|$","g");text.replace(reDelimiters,function(match,escapeValue,interpolateValue,esTemplateValue,evaluateValue,offset){return interpolateValue||(interpolateValue=esTemplateValue),source+=text.slice(index,offset).replace(reUnescapedString,escapeStringChar),escapeValue&&(source+="' +\n__e("+escapeValue+") +\n'"),evaluateValue&&(isEvaluating=!0,source+="';\n"+evaluateValue+";\n__p += '"),interpolateValue&&(source+="' +\n((__t = ("+interpolateValue+")) == null ? '' : __t) +\n'"),index=offset+match.length,match}),source+="';\n";var variable=options.variable,hasVariable=variable;hasVariable||(variable="obj",source="with ("+variable+") {\n"+source+"\n}\n"),source=(isEvaluating?source.replace(reEmptyStringLeading,""):source).replace(reEmptyStringMiddle,"$1").replace(reEmptyStringTrailing,"$1;"),source="function("+variable+") {\n"+(hasVariable?"":variable+" || ("+variable+" = {});\n")+"var __t, __p = '', __e = _.escape"+(isEvaluating?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+source+"return __p\n}";var sourceURL="\n/*\n//# sourceURL="+(options.sourceURL||"/lodash/template/source["+templateCounter++ +"]")+"\n*/";try{var result=Function(importsKeys,"return "+source+sourceURL).apply(undefined,importsValues)}catch(e){throw e.source=source,e}return data?result(data):(result.source=source,result)}function times(n,callback,thisArg){n=(n=+n)>-1?n:0;var index=-1,result=Array(n);for(callback=baseCreateCallback(callback,thisArg,1);++index<n;)result[index]=callback(index);return result}function unescape(string){return null==string?"":String(string).replace(reEscapedHtml,unescapeHtmlChar)}function uniqueId(prefix){var id=++idCounter;return String(null==prefix?"":prefix)+id}function chain(value){return value=new lodashWrapper(value),value.__chain__=!0,value}function tap(value,interceptor){return interceptor(value),value}function wrapperChain(){return this.__chain__=!0,this}function wrapperToString(){return String(this.__wrapped__)}function wrapperValueOf(){return this.__wrapped__}context=context?_.defaults(root.Object(),context,_.pick(root,contextProps)):root;var Array=context.Array,Boolean=context.Boolean,Date=context.Date,Function=context.Function,Math=context.Math,Number=context.Number,Object=context.Object,RegExp=context.RegExp,String=context.String,TypeError=context.TypeError,arrayRef=[],objectProto=Object.prototype,oldDash=context._,toString=objectProto.toString,reNative=RegExp("^"+String(toString).replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/toString| for [^\]]+/g,".*?")+"$"),ceil=Math.ceil,clearTimeout=context.clearTimeout,floor=Math.floor,fnToString=Function.prototype.toString,getPrototypeOf=isNative(getPrototypeOf=Object.getPrototypeOf)&&getPrototypeOf,hasOwnProperty=objectProto.hasOwnProperty,push=arrayRef.push,setTimeout=context.setTimeout,splice=arrayRef.splice,unshift=arrayRef.unshift,defineProperty=function(){try{var o={},func=isNative(func=Object.defineProperty)&&func,result=func(o,o,o)&&func}catch(e){}return result}(),nativeCreate=isNative(nativeCreate=Object.create)&&nativeCreate,nativeIsArray=isNative(nativeIsArray=Array.isArray)&&nativeIsArray,nativeIsFinite=context.isFinite,nativeIsNaN=context.isNaN,nativeKeys=isNative(nativeKeys=Object.keys)&&nativeKeys,nativeMax=Math.max,nativeMin=Math.min,nativeParseInt=context.parseInt,nativeRandom=Math.random,ctorByClass={};ctorByClass[arrayClass]=Array,ctorByClass[boolClass]=Boolean,ctorByClass[dateClass]=Date,ctorByClass[funcClass]=Function,ctorByClass[objectClass]=Object,ctorByClass[numberClass]=Number,ctorByClass[regexpClass]=RegExp,ctorByClass[stringClass]=String,lodashWrapper.prototype=lodash.prototype;var support=lodash.support={};support.funcDecomp=!isNative(context.WinRTError)&&reThis.test(runInContext),support.funcNames="string"==typeof Function.name,lodash.templateSettings={escape:/<%-([\s\S]+?)%>/g,evaluate:/<%([\s\S]+?)%>/g,interpolate:reInterpolate,variable:"",imports:{_:lodash}},nativeCreate||(baseCreate=function(){function Object(){}return function(prototype){if(isObject(prototype)){Object.prototype=prototype;var result=new Object;Object.prototype=null}return result||context.Object()}}());var setBindData=defineProperty?function(func,value){descriptor.value=value,defineProperty(func,"__bindData__",descriptor)}:noop,isArray=nativeIsArray||function(value){return value&&"object"==typeof value&&"number"==typeof value.length&&toString.call(value)==arrayClass||!1},shimKeys=function(object){var index,iterable=object,result=[];if(!iterable)return result;if(!objectTypes[typeof object])return result;for(index in iterable)hasOwnProperty.call(iterable,index)&&result.push(index);return result},keys=nativeKeys?function(object){return isObject(object)?nativeKeys(object):[]}:shimKeys,htmlEscapes={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},htmlUnescapes=invert(htmlEscapes),reEscapedHtml=RegExp("("+keys(htmlUnescapes).join("|")+")","g"),reUnescapedHtml=RegExp("["+keys(htmlEscapes).join("")+"]","g"),assign=function(object,source,guard){var index,iterable=object,result=iterable;if(!iterable)return result;var args=arguments,argsIndex=0,argsLength="number"==typeof guard?2:args.length;if(argsLength>3&&"function"==typeof args[argsLength-2])var callback=baseCreateCallback(args[--argsLength-1],args[argsLength--],2);else argsLength>2&&"function"==typeof args[argsLength-1]&&(callback=args[--argsLength]);for(;++argsIndex<argsLength;)if(iterable=args[argsIndex],iterable&&objectTypes[typeof iterable])for(var ownIndex=-1,ownProps=objectTypes[typeof iterable]&&keys(iterable),length=ownProps?ownProps.length:0;++ownIndex<length;)index=ownProps[ownIndex],result[index]=callback?callback(result[index],iterable[index]):iterable[index];return result},defaults=function(object,source,guard){var index,iterable=object,result=iterable;if(!iterable)return result;for(var args=arguments,argsIndex=0,argsLength="number"==typeof guard?2:args.length;++argsIndex<argsLength;)if(iterable=args[argsIndex],iterable&&objectTypes[typeof iterable])for(var ownIndex=-1,ownProps=objectTypes[typeof iterable]&&keys(iterable),length=ownProps?ownProps.length:0;++ownIndex<length;)index=ownProps[ownIndex],"undefined"==typeof result[index]&&(result[index]=iterable[index]);return result},forIn=function(collection,callback,thisArg){var index,iterable=collection,result=iterable;if(!iterable)return result;if(!objectTypes[typeof iterable])return result;callback=callback&&"undefined"==typeof thisArg?callback:baseCreateCallback(callback,thisArg,3);for(index in iterable)if(callback(iterable[index],index,collection)===!1)return result;return result},forOwn=function(collection,callback,thisArg){var index,iterable=collection,result=iterable;if(!iterable)return result;if(!objectTypes[typeof iterable])return result;callback=callback&&"undefined"==typeof thisArg?callback:baseCreateCallback(callback,thisArg,3);for(var ownIndex=-1,ownProps=objectTypes[typeof iterable]&&keys(iterable),length=ownProps?ownProps.length:0;++ownIndex<length;)if(index=ownProps[ownIndex],callback(iterable[index],index,collection)===!1)return result;return result},isPlainObject=getPrototypeOf?function(value){if(!value||toString.call(value)!=objectClass)return!1;var valueOf=value.valueOf,objProto=isNative(valueOf)&&(objProto=getPrototypeOf(valueOf))&&getPrototypeOf(objProto);return objProto?value==objProto||getPrototypeOf(value)==objProto:shimIsPlainObject(value)}:shimIsPlainObject,countBy=createAggregator(function(result,value,key){hasOwnProperty.call(result,key)?result[key]++:result[key]=1}),groupBy=createAggregator(function(result,value,key){(hasOwnProperty.call(result,key)?result[key]:result[key]=[]).push(value)}),indexBy=createAggregator(function(result,value,key){result[key]=value}),pluck=map,where=filter,now=isNative(now=Date.now)&&now||function(){return(new Date).getTime()},parseInt=8==nativeParseInt(whitespace+"08")?nativeParseInt:function(value,radix){return nativeParseInt(isString(value)?value.replace(reLeadingSpacesAndZeros,""):value,radix||0)};return lodash.after=after,lodash.assign=assign,lodash.at=at,lodash.bind=bind,lodash.bindAll=bindAll,lodash.bindKey=bindKey,lodash.chain=chain,lodash.compact=compact,lodash.compose=compose,lodash.constant=constant,lodash.countBy=countBy,lodash.create=create,lodash.createCallback=createCallback,lodash.curry=curry,lodash.debounce=debounce,lodash.defaults=defaults,lodash.defer=defer,lodash.delay=delay,lodash.difference=difference,lodash.filter=filter,lodash.flatten=flatten,lodash.forEach=forEach,lodash.forEachRight=forEachRight,lodash.forIn=forIn,lodash.forInRight=forInRight,lodash.forOwn=forOwn,lodash.forOwnRight=forOwnRight,lodash.functions=functions,lodash.groupBy=groupBy,lodash.indexBy=indexBy,lodash.initial=initial,lodash.intersection=intersection,lodash.invert=invert,lodash.invoke=invoke,lodash.keys=keys,lodash.map=map,lodash.mapValues=mapValues,lodash.max=max,lodash.memoize=memoize,lodash.merge=merge,lodash.min=min,lodash.omit=omit,lodash.once=once,lodash.pairs=pairs,lodash.partial=partial,lodash.partialRight=partialRight,lodash.pick=pick,lodash.pluck=pluck,lodash.property=property,lodash.pull=pull,lodash.range=range,lodash.reject=reject,lodash.remove=remove,lodash.rest=rest,lodash.shuffle=shuffle,lodash.sortBy=sortBy,lodash.tap=tap,lodash.throttle=throttle,lodash.times=times,lodash.toArray=toArray,lodash.transform=transform,lodash.union=union,lodash.uniq=uniq,lodash.values=values,lodash.where=where,lodash.without=without,lodash.wrap=wrap,lodash.xor=xor,lodash.zip=zip,lodash.zipObject=zipObject,lodash.collect=map,lodash.drop=rest,lodash.each=forEach,lodash.eachRight=forEachRight,lodash.extend=assign,lodash.methods=functions,lodash.object=zipObject,lodash.select=filter,lodash.tail=rest,lodash.unique=uniq,lodash.unzip=zip,mixin(lodash),lodash.clone=clone,lodash.cloneDeep=cloneDeep,lodash.contains=contains,lodash.escape=escape,lodash.every=every,lodash.find=find,lodash.findIndex=findIndex,lodash.findKey=findKey,lodash.findLast=findLast,lodash.findLastIndex=findLastIndex,lodash.findLastKey=findLastKey,lodash.has=has,lodash.identity=identity,lodash.indexOf=indexOf,lodash.isArguments=isArguments,lodash.isArray=isArray,lodash.isBoolean=isBoolean,lodash.isDate=isDate,lodash.isElement=isElement,lodash.isEmpty=isEmpty,lodash.isEqual=isEqual,lodash.isFinite=isFinite,lodash.isFunction=isFunction,lodash.isNaN=isNaN,lodash.isNull=isNull,lodash.isNumber=isNumber,lodash.isObject=isObject,lodash.isPlainObject=isPlainObject,lodash.isRegExp=isRegExp,lodash.isString=isString,lodash.isUndefined=isUndefined,lodash.lastIndexOf=lastIndexOf,lodash.mixin=mixin,lodash.noConflict=noConflict,lodash.noop=noop,lodash.now=now,lodash.parseInt=parseInt,lodash.random=random,lodash.reduce=reduce,lodash.reduceRight=reduceRight,lodash.result=result,lodash.runInContext=runInContext,lodash.size=size,lodash.some=some,lodash.sortedIndex=sortedIndex,lodash.template=template,lodash.unescape=unescape,lodash.uniqueId=uniqueId,lodash.all=every,lodash.any=some,lodash.detect=find,lodash.findWhere=find,lodash.foldl=reduce,lodash.foldr=reduceRight,lodash.include=contains,lodash.inject=reduce,mixin(function(){var source={};return forOwn(lodash,function(func,methodName){lodash.prototype[methodName]||(source[methodName]=func)}),source}(),!1),lodash.first=first,lodash.last=last,lodash.sample=sample,lodash.take=first,lodash.head=first,forOwn(lodash,function(func,methodName){var callbackable="sample"!==methodName;lodash.prototype[methodName]||(lodash.prototype[methodName]=function(n,guard){var chainAll=this.__chain__,result=func(this.__wrapped__,n,guard);return chainAll||null!=n&&(!guard||callbackable&&"function"==typeof n)?new lodashWrapper(result,chainAll):result})}),lodash.VERSION="2.4.1",lodash.prototype.chain=wrapperChain,lodash.prototype.toString=wrapperToString,lodash.prototype.value=wrapperValueOf,lodash.prototype.valueOf=wrapperValueOf,forEach(["join","pop","shift"],function(methodName){var func=arrayRef[methodName];lodash.prototype[methodName]=function(){var chainAll=this.__chain__,result=func.apply(this.__wrapped__,arguments);return chainAll?new lodashWrapper(result,chainAll):result}}),forEach(["push","reverse","sort","unshift"],function(methodName){var func=arrayRef[methodName];lodash.prototype[methodName]=function(){return func.apply(this.__wrapped__,arguments),this}}),forEach(["concat","slice","splice"],function(methodName){var func=arrayRef[methodName];lodash.prototype[methodName]=function(){return new lodashWrapper(func.apply(this.__wrapped__,arguments),this.__chain__)}}),lodash}var undefined,arrayPool=[],objectPool=[],idCounter=0,keyPrefix=+new Date+"",largeArraySize=75,maxPoolSize=40,whitespace=" 	\f\n\r\u2028\u2029",reEmptyStringLeading=/\b__p \+= '';/g,reEmptyStringMiddle=/\b(__p \+=) '' \+/g,reEmptyStringTrailing=/(__e\(.*?\)|\b__t\)) \+\n'';/g,reEsTemplate=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,reFlags=/\w*$/,reFuncName=/^\s*function[ \n\r\t]+\w/,reInterpolate=/<%=([\s\S]+?)%>/g,reLeadingSpacesAndZeros=RegExp("^["+whitespace+"]*0+(?=.$)"),reNoMatch=/($^)/,reThis=/\bthis\b/,reUnescapedString=/['\n\r\t\u2028\u2029\\]/g,contextProps=["Array","Boolean","Date","Function","Math","Number","Object","RegExp","String","_","attachEvent","clearTimeout","isFinite","isNaN","parseInt","setTimeout"],templateCounter=0,argsClass="[object Arguments]",arrayClass="[object Array]",boolClass="[object Boolean]",dateClass="[object Date]",funcClass="[object Function]",numberClass="[object Number]",objectClass="[object Object]",regexpClass="[object RegExp]",stringClass="[object String]",cloneableClasses={};cloneableClasses[funcClass]=!1,cloneableClasses[argsClass]=cloneableClasses[arrayClass]=cloneableClasses[boolClass]=cloneableClasses[dateClass]=cloneableClasses[numberClass]=cloneableClasses[objectClass]=cloneableClasses[regexpClass]=cloneableClasses[stringClass]=!0;var debounceOptions={leading:!1,maxWait:0,trailing:!1},descriptor={configurable:!1,enumerable:!1,value:null,writable:!1},objectTypes={"boolean":!1,"function":!0,object:!0,number:!1,string:!1,undefined:!1},stringEscapes={"\\":"\\","'":"'","\n":"n","\r":"r","	":"t","\u2028":"u2028","\u2029":"u2029"},root=objectTypes[typeof window]&&window||this,freeExports=objectTypes[typeof exports]&&exports&&!exports.nodeType&&exports,freeModule=objectTypes[typeof module]&&module&&!module.nodeType&&module,moduleExports=freeModule&&freeModule.exports===freeExports&&freeExports,freeGlobal=objectTypes[typeof global]&&global;!freeGlobal||freeGlobal.global!==freeGlobal&&freeGlobal.window!==freeGlobal||(root=freeGlobal);var _=runInContext();"function"==typeof define&&"object"==typeof define.amd&&define.amd?(root._=_,define(function(){return _
})):freeExports&&freeModule?moduleExports?(freeModule.exports=_)._=_:freeExports._=_:root._=_}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}]},{},[11]);